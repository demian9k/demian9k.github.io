{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var r=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var i=a=>l(a,\"__esModule\",{value:!0});var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of d(s))!h.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=p(s,n))||c.enumerable});return a},y=a=>k(i(l(a!=null?r(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((P,t)=>{t.exports=_jsx_runtime});var C={};N(C,{default:()=>b,frontmatter:()=>g});var e=y(o()),g={title:\"K8S manifest - VolumeSnapshot\",date:new Date(168559938e4),lastmod:\"2023-06-01\",tags:[\"kubernetes\"],draft:!1,summary:\"\",layout:\"PostSimple\"};function v(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h1,{id:\"volumesnapshot\\uC740\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#volumesnapshot\\uC740\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"VolumeSnapShot\\uC740\"]}),(0,e.jsx)(n.p,{children:\"\\uAD00\\uB828 \\uB9AC\\uC18C\\uC2A4\\uB294 3\\uAC00\\uC9C0\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"VolumeSnapshot\"}),(0,e.jsx)(n.li,{children:\"VolumeSnapshotClass\"}),(0,e.jsx)(n.li,{children:\"VolumeSnapshotContent\"})]}),(0,e.jsx)(n.p,{children:\"VolumeSnapshotClass spec\\uC744 \\uAE30\\uC900\\uC73C\\uB85C \\uC0AC\\uC6A9\\uC790\\uAC00 VolumeSnapshot \\uB9AC\\uC18C\\uC2A4\\uB97C apply(\\uC801\\uC6A9)\\uD558\\uBA74 VolumeSnapshotContent\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC774 \\uAD00\\uACC4\\uB294 StorageClass\\uB97C \\uAE30\\uC900\\uC73C\\uB85C, \\uC0AC\\uC6A9\\uC790\\uAC00 PVC\\uB85C \\uC694\\uCCAD\\uD558\\uACE0, PV\\uAC00 \\uC2E4\\uC81C\\uB85C \\uD560\\uB2F9\\uB418\\uB294 \\uAD00\\uACC4\\uC640 \\uC720\\uC0AC\\uD558\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"GCE PersistentDisk \\uB97C \\uC0AC\\uC6A9\\uD574 VolumeSnapshot\\uC744 \\uC0DD\\uC131\\uD558\\uB824\\uBA74 \\uC544\\uB798\\uC640 \\uC808\\uCC28\\uB85C \\uC9C4\\uD589\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token important shebang\",children:\"#!/bin/bash\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\" -z \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),'\"']}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"then\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"echo\"}),\" please \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"set\"}),\" PROJECT \",(0,e.jsx)(n.span,{className:\"token function\",children:\"env\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fi\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"GCE_PD_SA_NAME\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`gce-pd-csi-sa\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Install CSI Common Component\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),` clone https://github.com/kubernetes-csi/external-snapshotter -b v2.1.1\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl apply -f external-snapshotter/config/crd\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl apply -f external-snapshotter/deploy/kubernetes/ -R\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Install GCE PersistentDisk CSI Driver\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),` clone https://github.com/kubernetes-sigs/gcp-compute-persistent-disk-csi-driver\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"git\"}),` checkout ac1f8c -C gcp-compute-persistent-disk-csi-driver/\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl create namespace gce-pd-csi-driver\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl apply -k ./gcp-compute-persistent-disk-csi-driver/deploy/kubernetes/overlays/stable\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"IAM_NAME\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token variable\",children:\"${GCE_PD_SA_NAME}\"}),\"@\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),`.iam.gserviceaccount.com\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud iam service-accounts create \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${GCE_PD_SA_NAME}\"}),\" --project \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud iam roles create gcp_compute_persistent_disk_csi_driver_custom_role --quiet \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  --project \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),` --file ./gcp-compute-persistent-disk-csi-driver/deploy/gcp-compute-persistent-disk-csi-driver-custom-role.yaml\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud projects add-iam-policy-binding \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),\" --member serviceAccount:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${IAM_NAME}\"}),` --role roles/compute.storageAdmin\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud projects add-iam-policy-binding \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),\" --member serviceAccount:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${IAM_NAME}\"}),` --role roles/iam.serviceAccountUser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud projects add-iam-policy-binding \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),\" --member serviceAccount:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${IAM_NAME}\"}),\" --role projects/\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),`/roles/gcp_compute_persistent_disk_csi_driver_custom_role\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud iam service-accounts keys create ./cloud-sa.json --iam-account \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${IAM_NAME}\"}),\" --project \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"${PROJECT}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl create namespace gce-pd-csi-driver\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl -n gce-pd-csi-driver create secret generic cloud-sa --from-file\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`./cloud-sa.json\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"rm\"}),` -f ./cloud-sa.json\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"rm\"}),` -rf ./external-snapshotter ./gcp-compute-persistent-disk-csi-driver\n`]})]})}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"install-gcp-csi \\uC2A4\\uD06C\\uB9BD\\uD2B8 \\uC2E4\\uD589\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"CSI Common Component \\uBC0F GCE PersistentDisk CSI Driver \\uC124\\uCE58\"}),(0,e.jsx)(n.li,{children:\"GCP\\uC758 ServiceAccount \\uC0DD\\uC131\\uD558\\uACE0 \\uADF8 \\uC778\\uC99D\\uC815\\uBCF4\\uB97C \\uC2DC\\uD06C\\uB9BF \\uB9AC\\uC18C\\uC2A4\\uB85C \\uB4F1\\uB85D\\uD55C\\uB2E4.\"})]}),(0,e.jsxs)(n.ol,{start:\"2\",children:[(0,e.jsx)(n.li,{children:\"PVC\\uC5D0\\uC11C \\uCC38\\uC870\\uD574\\uC57C \\uD558\\uB294 Stroage class \\uC791\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"VolumeSnapshotClass\\uB97C \\uC791\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"2\\uC5D0\\uC11C \\uC120\\uC5B8\\uD55C storage class\\uB97C spec\\uC73C\\uB85C \\uD558\\uC5EC PVC\\uB97C \\uC791\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"VolumeSnapshot\\uC744 \\uC791\\uC131\\uD55C\\uB2E4. volumeSnapshotClass\\uC640 PVC\\uB97C \\uB9E4\\uD551\\uD55C\\uB2E4.\"})]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# pvc \\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD574\\uC57C \\uD558\\uB294 \\uC2A4\\uD1A0\\uB9AC\\uC9C0 \\uD074\\uB798\\uC2A4\\uB97C \\uBA3C\\uC800 \\uC120\\uC5B8\\uD55C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`storageclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" pd.csi.storage.gke.io \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" pd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`standard\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Delete\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeBindingMode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Immediate\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"allowVolumeExpansion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` snapshot.storage.k8s.io/v1beta1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` VolumeSnapshotClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`volumesnapshotclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"driver\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` pd.csi.storage.gke.io\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"deletionPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Delete\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" source\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`storageclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 1Gi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC774 Pod\\uB294 StorageClass, PersistentVolumeClaim \\uB9CC\\uC73C\\uB85C \\uC0DD\\uC131\\uB418\\uC5C8\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" source\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" tools\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` amsy810/tools\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'/bin/sh'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'-c'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"args\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'date > /data/time.txt && sleep infinity'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`volume\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`volume\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaim\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"claimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" source\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# VolumeSnapshot\\uC744 \\uC0DD\\uC131\\uD558\\uBA74 \\uD574\\uB2F9 \\uC2DC\\uC810\\uC758 PVC\\uC5D0 \\uC5F0\\uACB0\\uB418\\uB294 PV\\uC758 \\uC2A4\\uB0C5\\uC0F7\\uC774 \\uC0DD\\uC131\\uB41C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC0DD\\uC131\\uB41C \\uC2A4\\uB0C5\\uC0F7\\uC758 \\uC815\\uBCF4\\uB294 VolumeSnapshotContent\\uB77C\\uB294 \\uB9AC\\uC18C\\uC2A4\\uB85C k8s\\uC5D0 \\uB4F1\\uB85D\\uB41C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` snapshot.storage.k8s.io/v1beta1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` VolumeSnapshot\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" source\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`snapshot\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeSnapshotClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`volumesnapshotclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"source\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" source\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl get volumesnapshot\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl get volumesnapshotcontents\n`})]})}),(0,e.jsx)(n.p,{children:\"\\uC0DD\\uC131\\uB41C VolumeSnapshot \\uC744 PVC\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uC5EC PV \\uB9AC\\uC18C\\uC2A4 \\uB9CC\\uB4E4\\uAE30 dataSource.kind\\uB97C VolumeSnapshot \\uC720\\uD615\\uC73C\\uB85C \\uC9C0\\uC815\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC5EC\\uAE30\\uC11C \\uC0DD\\uC131\\uD558\\uB294 \\uBCFC\\uB968 \\uD06C\\uAE30\\uB294 \\uC2A4\\uB0C5\\uC0F7\\uBCF4\\uB2E4 \\uD06C\\uAC8C \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4. \\uC2A4\\uB0C5\\uC0F7\\uC740 source-pvc(1Gi)\\uC5D0\\uC11C \\uC0DD\\uC131\\uB418\\uC5C8\\uC9C0\\uB9CC, \\uC774 PVC\\uB294 3Gi\\uB97C \\uD560\\uB2F9\\uD558\\uACE0 \\uC788\\uB2E4. \\uC774 PVC\\uB97C apply\\uD558\\uBA74 PV\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" restored\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`storageclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3Gi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dataSource\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` VolumeSnapshot\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" source\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`snapshot\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` snapshot.storage.k8s.io\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC2A4\\uB0C5\\uC0F7\\uC73C\\uB85C \\uC0DD\\uC131\\uB41C pvc\\uB97C Pod\\uC5D0\\uC11C \\uC77C\\uBC18\\uC801\\uC778 pvc\\uCC98\\uB7FC \\uC0AC\\uC6A9\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" restored\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" tools\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` amsy810/tools\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`volume\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`volume\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaim\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"claimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" restored\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]})]})})]})}}var b=v;return C;})();\n;return Component;","toc":[{"value":"VolumeSnapShot은","url":"#volumesnapshot은","depth":1}],"frontMatter":{"readingTime":{"text":"5 min read","minutes":4.425,"time":265500,"words":885},"slug":"k8s_manifest-VolumeSnapshot","fileName":"k8s_manifest-VolumeSnapshot.mdx","title":"K8S manifest - VolumeSnapshot","date":"2023-06-01T06:03:00.000Z","lastmod":"2023-06-01","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"demian11k","avatar":"/static/images/avatar.png","email":"demian11k@gmail.com","github":"https://github.com/demian9k","date":null}],"prev":{"title":"K8S manifest - PersistentVolumeClaim","date":"2023-06-01T05:03:00.000Z","lastmod":"2023-06-01","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-PersistentVolumeClaim"},"next":{"title":"K8S manifest - RBAC","date":"2023-06-02T01:03:00.000Z","lastmod":"2023-06-02","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-RBAC"}},"__N_SSG":true}