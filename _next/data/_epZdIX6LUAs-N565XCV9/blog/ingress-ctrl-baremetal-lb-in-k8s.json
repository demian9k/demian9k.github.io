{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var i=a=>c(a,\"__esModule\",{value:!0});var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{i(a);for(var l in s)c(a,l,{get:s[l],enumerable:!0})},k=(a,s,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!h.call(a,n)&&n!==\"default\"&&c(a,n,{get:()=>s[n],enumerable:!(l=d(s,n))||l.enumerable});return a},g=a=>k(i(c(a!=null?o(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var t=u((I,r)=>{r.exports=_jsx_runtime});var x={};N(x,{default:()=>E,frontmatter:()=>b});var e=g(t()),b={title:\"Hands-On Example: Ingress and Bare Metal Load Balancer in Kubernetes\",date:new Date(16859232e5),lastmod:\"2023-06-05\",tags:[\"Kubernetes\",\"Ingress\",\"LoadBalancer\"],draft:!1,summary:\"\",layout:\"PostSimple\",canonicalUrl:\"https://demian9k.github.io/blog/ingress-ctrl-baremetal-lb-in-k8s/\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({p:\"p\",br:\"br\",ul:\"ul\",li:\"li\",h3:\"h3\",a:\"a\",span:\"span\",pre:\"pre\",code:\"code\",h4:\"h4\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\uC774 \\uBB38\\uC11C\\uB294 Production level\\uC758 \\uCFE0\\uBC84\\uB124\\uD2F0\\uC2A4 \\uD074\\uB7EC\\uC2A4\\uD130\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uB418\\uB294 Resource\\uC778 Ingress \\uC640 LoadBalancer(Service)\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC \\uD074\\uB7EC\\uC2A4\\uD130 \\uC678\\uBD80\\uC5D0\\uC11C \\uC2E4\\uC81C containerized app\\uC73C\\uB85C \\uC804\\uB2EC\\uB418\\uAE30 \\uAE4C\\uC9C0\\uC758 \\uACFC\\uC815\\uC758 configuration\\uC744 \\uC11C\\uC220\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.p,{children:[\"\\uBAA8\\uB4E0 \\uC124\\uC815\\uC774 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC644\\uB8CC\\uB418\\uBA74 \\uC694\\uCCAD\\uC758 \\uD750\\uB984\\uC740 \\uC544\\uB798 \\uC21C\\uC11C\\uB300\\uB85C \\uC6C0\\uC9C1\\uC778\\uB2E4.\",(0,e.jsx)(n.br,{}),\"LoadBalancer -> Ingress-Controller -> NodePort Service -> Deployment -> Pod -> Container\"]}),(0,e.jsx)(n.p,{children:\"\\uD14C\\uC2A4\\uD2B8 \\uD658\\uACBD\\uC740 VirtualBox\\uB85C \\uAD6C\\uC131\\uB41C Linux VM 3\\uAC1C \\uB178\\uB4DC\\uC774\\uBA70 \\uC544\\uB798\\uCC98\\uB7FC \\uAD6C\\uC131\\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Node1 : 192.168.100.1(Control-plane)\"}),(0,e.jsx)(n.li,{children:\"Node2 : 192.168.100.2(Control-plane)\"}),(0,e.jsx)(n.li,{children:\"Node3 : 192.168.100.3\"})]}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB9AC\\uACE0 \\uD14C\\uC2A4\\uD2B8\\uB97C \\uC704\\uD55C \\uC678\\uBD80 \\uD638\\uC2A4\\uD2B8\\uB294 192.168.100.100 IP\\uB97C \\uAC16\\uACE0 \\uD574\\uB2F9 \\uB178\\uB4DC\\uC640 \\uD1B5\\uC2E0\\uC774 \\uAC00\\uB2A5\\uD55C host computer(windows 10) \\uC774\\uB2E4.\",(0,e.jsx)(n.br,{}),\"guest OS\\uC640 host\\uB294 VirtualBox\\uC758 192.168.100.0/24 network \\uBC94\\uC704 \\uC548\\uC5D0 \\uC788\\uB294 \\uC7A5\\uCE58\\uB4E4\\uC774\\uB2E4.\"]}),(0,e.jsxs)(n.h3,{id:\"1-apply-deployment-for-app\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#1-apply-deployment-for-app\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. Apply Deployment for App\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` apps/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Deployment\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" hello\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`world\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"selector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"matchLabels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" load\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"balancer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`example\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"replicas\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"template\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" load\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"balancer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`example\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" hello\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`world\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" gcr.io/google\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"samples/node\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"hello\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.0\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'#\\uC774\\uBBF8\\uC9C0\\uB294 /\\uB85C \\uC694\\uCCAD\\uD588\\uC744 \\uB54C \"Hello Kubernetes\" \\uBB38\\uC790\\uC5F4\\uC744 \\uC751\\uB2F5\\uD558\\uB294 \\uC11C\\uBC84\\uC774\\uB2E4.'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"protocol\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` TCP\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"2-expose-nodeport-service\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#2-expose-nodeport-service\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. Expose NodePort Service\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# kubectl expose deployment hello-world --type=NodePort --name=example-service\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Service\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" example\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`service\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nodePort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"31349\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"protocol\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` TCP\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"targetPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"selector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" load\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"balancer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`example\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` NodePort\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"testing-nodeport\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#testing-nodeport\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"testing NodePort\"]}),(0,e.jsx)(n.p,{children:\"\\uD074\\uB7EC\\uC2A4\\uD130 \\uC678\\uBD80\\uC5D0\\uC11C <node1 ip>:<nodePort> \\uB85C \\uD14C\\uC2A4\\uD2B8\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"192.168\"}),`.100.1:31349\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Hello Kubernetes\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"apply-ingress-controller-loadbalancer\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#apply-ingress-controller-loadbalancer\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Apply Ingress-Controller, LoadBalancer\"]}),(0,e.jsx)(n.p,{children:\"nginx-ingress-controller, metalLB \\uC124\\uCE58\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#ingress-nginx\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.0/deploy/static/provider/cloud/deploy.yaml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#metalLB\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.13.10/config/manifests/metallb-native.yaml\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#check metalLB resources\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"demian@node1:~/metallb$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),` kubectl get all -n metallb-system\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                              READY   STATUS    RESTARTS      AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/controller-5fd797fbf7-plr77   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     Running   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`             158m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/speaker-6wvmj                 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     Running   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`             139m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/speaker-bq5tv                 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     Running   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"13m ago\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`   158m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/speaker-s5nxl                 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     Running   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`             158m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"NAME                      TYPE        CLUSTER-IP    EXTERNAL-IP   PORT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"S\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`   AGE\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"service/webhook-service   ClusterIP   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.233\"}),\".7.27   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"none\",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\"        \",(0,e.jsx)(n.span,{className:\"token number\",children:\"443\"}),`/TCP   158m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                     DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"daemonset.apps/speaker   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\"         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\"         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\"       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\"            \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\"           kubernetes.io/os\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`linux   158m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                         READY   UP-TO-DATE   AVAILABLE   AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"deployment.apps/controller   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"            \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`           158m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                    DESIRED   CURRENT   READY   AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"replicaset.apps/controller-5fd797fbf7   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`       158m\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"apply-l2-metallb-customresources\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#apply-l2-metallb-customresources\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Apply L2 MetalLB CustomResources\"]}),(0,e.jsx)(n.p,{children:\"metalLB\\uC5D0\\uC11C \\uC9C0\\uC6D0\\uD558\\uB294 2\\uAC00\\uC9C0\\uC758 external network \\uC5F0\\uACB0 \\uBC29\\uBC95(L2(ARP), L3(BGP)) \\uC911 Layer2\\uC5D0\\uC11C advertise \\uD558\\uB294 \\uBC29\\uBC95\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC LoadBalancer\\uC5D0\\uC11C ingress-controller\\uC5D0 \\uD560\\uB2F9\\uD560 external ip address pool \\uBC0F L2Advertisement \\uB9AC\\uC18C\\uC2A4\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` metallb.io/v1beta1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` IPAddressPool\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" first\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pool\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" metallb\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`system\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"addresses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" 192.168.100.10\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`192.168.100.99\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` metallb.io/v1beta1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` L2Advertisement\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"network\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`l2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" metallb\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`system\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ipAddressPools\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" first\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pool\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"metallb-\\uB9AC\\uC18C\\uC2A4-\\uC801\\uC6A9-\\uD655\\uC778\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#metallb-\\uB9AC\\uC18C\\uC2A4-\\uC801\\uC6A9-\\uD655\\uC778\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"metalLB \\uB9AC\\uC18C\\uC2A4 \\uC801\\uC6A9 \\uD655\\uC778\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"demian@node1:~/metallb$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),` kubectl get IPAddressPool,L2Advertisement -n metallb-system\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                  AUTO ASSIGN   AVOID BUGGY IPS   ADDRESSES\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"ipaddresspool.metallb.io/first-pool   \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\"          \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),\"             \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"192.168.100.10-192.168.100.99\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                       IPADDRESSPOOLS   IPADDRESSPOOL SELECTORS   INTERFACES\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"l2advertisement.metallb.io/my-network-l2   \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"first-pool\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"lb\\uC5D0-\\uC758\\uD574-ingress-controller\\uC758-external-ip\\uC5D0-\\uD560\\uB2F9-\\uD655\\uC778\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#lb\\uC5D0-\\uC758\\uD574-ingress-controller\\uC758-external-ip\\uC5D0-\\uD560\\uB2F9-\\uD655\\uC778\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"LB\\uC5D0 \\uC758\\uD574 ingress-controller\\uC758 EXTERNAL-IP\\uC5D0 \\uD560\\uB2F9 \\uD655\\uC778\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"demian@node1:~/metallb$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),` kubectl get all -n ingress-nginx\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                            READY   STATUS      RESTARTS   AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/ingress-nginx-admission-create-sg4zf        \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\"/1     Completed   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`          170m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/ingress-nginx-admission-patch-246vx         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\"/1     Completed   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`          170m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"pod/ingress-nginx-controller-7d98bbddbd-hwm2n   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     Running     \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`          170m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"NAME                                         TYPE           CLUSTER-IP     EXTERNAL-IP      PORT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"S\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`                      AGE\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"service/ingress-nginx-controller             LoadBalancer   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.233\"}),\".2.130   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"192.168\"}),\".100.10   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),`:32347/TCP,443:32404/TCP   170m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"service/ingress-nginx-controller-admission   ClusterIP      \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.233\"}),\".49.33   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\"none\",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),\"           \",(0,e.jsx)(n.span,{className:\"token number\",children:\"443\"}),`/TCP                      170m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"deployment.apps/ingress-nginx-controller   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"/1     \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"            \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`           170m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                                  DESIRED   CURRENT   READY   AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"replicaset.apps/ingress-nginx-controller-7d98bbddbd   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\"         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`       170m\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`NAME                                       COMPLETIONS   DURATION   AGE\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"job.batch/ingress-nginx-admission-create   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`/1           4s         170m\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"job.batch/ingress-nginx-admission-patch    \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`/1           5s         170m\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"ingress-\\uB9AC\\uC18C\\uC2A4-\\uC801\\uC6A9\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#ingress-\\uB9AC\\uC18C\\uC2A4-\\uC801\\uC6A9\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ingress \\uB9AC\\uC18C\\uC2A4 \\uC801\\uC6A9\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC544\\uB798 Ingress\\uB294 ingressClassName\\uC758 \\uAC12\\uC73C\\uB85C \",(0,e.jsx)(n.code,{children:\"nginx\"}),\" \\uB97C \\uC124\\uC815\\uD55C\\uB2E4. \\uC774\\uC804 \\uB2E8\\uACC4\\uC5D0\\uC11C \\uAD6C\\uC131\\uD55C nginx-ingress-controller manifest \\uC911 IngressClass\\uC758 metadata.name\\uACFC \\uB3D9\\uC77C\\uD558\\uAC8C \\uD558\\uC5EC Ingress\\uAC00 ingress-controller\\uB85C nginx\\uB97C \\uC0AC\\uC6A9\\uD560 \\uAC83\\uC784\\uC744 \\uBA85\\uC2DC\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"Ingress \\uB9AC\\uC18C\\uC2A4\\uB294 Ingress-Controller\\uAC00 \\uC0AC\\uC6A9\\uD558\\uB294 \\uC815\\uCC45\\uC744 \\uC815\\uC758\\uD55C\\uB2E4. \\uC544\\uB798\\uB294 rules\\uC5D0\\uC11C /hello\\uB85C \\uB4E4\\uC5B4\\uC624\\uB294 \\uC694\\uCCAD\\uC744 example-service\\uC758 8080 \\uD3EC\\uD2B8\\uB85C \\uB77C\\uC6B0\\uD305\\uD558\\uB3C4\\uB85D \\uBA85\\uC2DC\\uD558\\uC600\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` networking.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Ingress\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" hello\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`ingress\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"annotations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nginx.ingress.kubernetes.io/rewrite-target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ingressClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"http\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"paths\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /hello\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"pathType\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Prefix\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"backend\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"service\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" example\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`service\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"number\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798\\uB294 ingress-nginx-controller manifest \\uC911 \\uD558\\uB098\\uC778 IngressClass \\uC774\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` networking.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` IngressClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app.kubernetes.io/component\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` controller\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app.kubernetes.io/instance\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ingress\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app.kubernetes.io/name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ingress\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app.kubernetes.io/part-of\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ingress\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app.kubernetes.io/version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 1.8.0\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"controller\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" k8s.io/ingress\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`nginx\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"\\uD074\\uB7EC\\uC2A4\\uD130-\\uC678\\uBD80\\uC5D0\\uC11C-ingress-external-ip\\uB85C-\\uD14C\\uC2A4\\uD2B8\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\uD074\\uB7EC\\uC2A4\\uD130-\\uC678\\uBD80\\uC5D0\\uC11C-ingress-external-ip\\uB85C-\\uD14C\\uC2A4\\uD2B8\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uD074\\uB7EC\\uC2A4\\uD130 \\uC678\\uBD80\\uC5D0\\uC11C ingress external ip\\uB85C \\uD14C\\uC2A4\\uD2B8\"]}),(0,e.jsxs)(n.p,{children:[\"Ingress\\uAE4C\\uC9C0 \\uAD6C\\uC131\\uD558\\uBA74 \\uC544\\uB798 \\uC21C\\uC11C\\uB300\\uB85C \\uC694\\uCCAD\\uC774 \\uD750\\uB974\\uB3C4\\uB85D \\uAD6C\\uC131\\uB41C \\uAC83\\uC774\\uB2E4.\",(0,e.jsx)(n.br,{}),\"LoadBalancer -> Ingress-Controller -> NodePort Service -> Deployment -> Pod -> Container\",(0,e.jsx)(n.br,{}),\"\\uC774\\uC81C \\uD074\\uB7EC\\uC2A4\\uD130 \\uC678\\uBD80\\uC5D0\\uC11C LB\\uB97C \\uD1B5\\uD574 192.168.100.10\\uC5D0 \\uC811\\uADFC \\uAC00\\uB2A5\\uD574\\uC84C\\uC73C\\uBBC0\\uB85C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uD14C\\uC2A4\\uD2B8\\uD558\\uBA74 \\uC131\\uACF5\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"192.168\"}),`.100.10/hello\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Hello Kubernetes\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),`\n`]})]})})]})}}var E=y;return x;})();\n;return Component;","toc":[{"value":"1. Apply Deployment for App","url":"#1-apply-deployment-for-app","depth":3},{"value":"2. Expose NodePort Service","url":"#2-expose-nodeport-service","depth":3},{"value":"testing NodePort","url":"#testing-nodeport","depth":4},{"value":"Apply Ingress-Controller, LoadBalancer","url":"#apply-ingress-controller-loadbalancer","depth":3},{"value":"Apply L2 MetalLB CustomResources","url":"#apply-l2-metallb-customresources","depth":3},{"value":"metalLB 리소스 적용 확인","url":"#metallb-리소스-적용-확인","depth":4},{"value":"LB에 의해 ingress-controller의 EXTERNAL-IP에 할당 확인","url":"#lb에-의해-ingress-controller의-external-ip에-할당-확인","depth":4},{"value":"Ingress 리소스 적용","url":"#ingress-리소스-적용","depth":3},{"value":"클러스터 외부에서 ingress external ip로 테스트","url":"#클러스터-외부에서-ingress-external-ip로-테스트","depth":4}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.195,"time":311700,"words":1039},"slug":"ingress-ctrl-baremetal-lb-in-k8s","fileName":"ingress-ctrl-baremetal-lb-in-k8s.mdx","title":"Hands-On Example: Ingress and Bare Metal Load Balancer in Kubernetes","date":"2023-06-05T00:00:00.000Z","lastmod":"2023-06-05","tags":["Kubernetes","Ingress","LoadBalancer"],"draft":false,"summary":"","layout":"PostSimple","canonicalUrl":"https://demian9k.github.io/blog/ingress-ctrl-baremetal-lb-in-k8s/"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"demian11k","avatar":"/static/images/avatar.png","email":"demian11k@gmail.com","github":"https://github.com/demian9k","date":null}],"prev":{"title":"Setting up a Kubernetes Cluster using Kubespray on VirtualBox with Ubuntu 22.04","date":"2023-06-04T02:02:11.000Z","lastmod":"2023-06-04","tags":["kubernetes","ubuntu","virtualbox"],"draft":false,"summary":"","layout":"PostSimple","canonicalUrl":"https://demian9k.github.io/blog/set-up-k8s-cluster-kubespray-on-virtualbox-ubuntu2204/","slug":"set-up-k8s-cluster-kubespray-on-virtualbox-ubuntu2204"},"next":{"title":"K8S manifest - LoadBalancer Ingress Relation chatgpt conversation","date":"2023-06-05T03:03:00.000Z","lastmod":"2023-06-05","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_loadbalanacer-ingress_relation_chatgpt_answer"}},"__N_SSG":true}