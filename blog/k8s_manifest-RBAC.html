<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>K8S manifest - RBAC</title><meta name="robots" content="follow, index"/><meta name="description" content=""/><meta property="og:url" content="https://demian9k.github.io/blog/k8s_manifest-RBAC"/><meta property="og:type" content="article"/><meta property="og:site_name" content="demian11k studylog"/><meta property="og:description" content=""/><meta property="og:title" content="K8S manifest - RBAC"/><meta property="og:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="K8S manifest - RBAC"/><meta name="twitter:description" content=""/><meta name="twitter:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><link rel="canonical" href="https://demian9k.github.io/blog/k8s_manifest-RBAC"/><meta property="article:published_time" content="2023-06-02T01:03:00.000Z"/><meta property="article:modified_time" content="2023-06-02T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://demian9k.github.io/blog/k8s_manifest-RBAC"
  },
  "headline": "K8S manifest - RBAC",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2023-06-02T01:03:00.000Z",
  "dateModified": "2023-06-02T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "demian11k"
  },
  "publisher": {
    "@type": "Organization",
    "name": "demian11k",
    "logo": {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/logo.png"
    }
  },
  "description": ""
}</script><meta name="next-head-count" content="21"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/9da9539fac7f1ee9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9da9539fac7f1ee9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-1667cddafac2eea3.js" defer=""></script><script src="/_next/static/chunks/main-bfc1a3b6dd286443.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e097d8b875e64e46.js" defer=""></script><script src="/_next/static/chunks/140-77b8ab5a870d524b.js" defer=""></script><script src="/_next/static/chunks/574-40cb695d6b511631.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-48fd063b43fdbe6a.js" defer=""></script><script src="/_next/static/ZrykKxtWiPyMXxUDniMmQ/_buildManifest.js" defer=""></script><script src="/_next/static/ZrykKxtWiPyMXxUDniMmQ/_ssgManifest.js" defer=""></script><script src="/_next/static/ZrykKxtWiPyMXxUDniMmQ/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="demian11k.studylog" href="/static"><div class="flex items-center justify-between"><div class="mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="A" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full object-cover object-center md:h-36 lg:h-48" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="A" srcSet="/_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=48 1x, /_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=96 2x" src="/_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full object-cover object-center md:h-36 lg:h-48" loading="lazy"/></noscript></span></div><div class="hidden h-6 text-2xl font-semibold sm:block">demian11k.studylog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div><header><div class="space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700"><dl><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-06-02T01:03:00.000Z">June 2, 2023</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">K8S manifest - RBAC</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0 " style="grid-template-rows:auto 1fr"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h3 id="wiki-에서-rbac의-정의"><a href="#wiki-에서-rbac의-정의" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>wiki 에서 RBAC의 정의</h3><p>컴퓨터 시스템 Security 에서 Role-based access control 은 mandatory access control(MAC) 또는 discretionary access control(DAC)를 구현함으로서 시스템에 대한 접근을 인가된 사용자에게만 허용하는 접근법이다.</p><p>Role-Based Access Control (RBAC) is a model used for managing access to resources in computer systems. RBAC itself does not directly enforce any access control mechanisms, but it provides a framework for organizing access control policies. Mandatory Access Control (MAC) and Discretionary Access Control (DAC) are two different types of access control mechanisms that can be implemented within the RBAC framework. Here&#x27;s how they differ:</p><ol><li>Mandatory Access Control (MAC):</li></ol><ul><li>MAC is a strict access control model where access decisions are made based on a set of predefined rules and policies.</li><li>Access to resources is determined by the system based on labels or classifications assigned to subjects (users or processes) and objects (resources or files).</li><li>The access decisions are usually made by a central authority or security administrator, and users have little or no control over granting or revoking access permissions.</li><li>MAC is typically used in environments with high-security requirements, such as government or military systems, where access control decisions are critical and need to be strictly enforced.</li></ul><ol start="2"><li>Discretionary Access Control (DAC):</li></ol><ul><li>DAC is a more flexible access control model where access decisions are at the discretion of the resource owner.</li><li>The resource owner has control over granting or revoking access permissions to their resources, and they can assign different access levels to different users or groups.</li><li>Users have more control over their own resources, and they can delegate access permissions to other users based on their trust relationships.</li><li>DAC is commonly used in systems where users have more autonomy and need greater control over access, such as personal computers or file-sharing networks.</li></ul><p>In RBAC, both MAC and DAC can be implemented as part of the access control policy. RBAC provides a framework for defining roles, assigning permissions to roles, and mapping roles to users or groups. The access control decisions can be enforced using MAC or DAC principles, depending on the security requirements and the level of control desired over access permissions.</p><p>역할 기반 액세스 제어(RBAC)는 컴퓨터 시스템에서 리소스에 대한 액세스를 관리하는 데 사용되는 모델입니다. RBAC 자체는 액세스 제어 메커니즘을 직접 시행하지는 않지만 액세스 제어 정책을 구성하기 위한 프레임워크를 제공합니다. MAC(필수 액세스 제어)와 DAC(임의 액세스 제어)는 RBAC 프레임워크 내에서 구현할 수 있는 두 가지 유형의 액세스 제어 메커니즘입니다. 두 메커니즘의 차이점은 다음과 같습니다:</p><ol><li>필수 액세스 제어(MAC):</li></ol><ul><li>MAC은 사전 정의된 일련의 규칙과 정책에 따라 액세스 결정이 내려지는 엄격한 액세스 제어 모델입니다.</li><li>리소스에 대한 액세스는 주체(사용자 또는 프로세스) 및 객체(리소스 또는 파일)에 할당된 레이블 또는 분류를 기반으로 시스템에 의해 결정됩니다.</li><li>액세스 결정은 일반적으로 중앙 기관 또는 보안 관리자가 내리며, 사용자는 액세스 권한을 부여하거나 취소할 수 있는 권한이 거의 또는 전혀 없습니다.</li><li>MAC은 일반적으로 액세스 제어 결정이 중요하고 엄격하게 적용해야 하는 정부 또는 군사 시스템과 같이 보안 요구 사항이 높은 환경에서 사용됩니다.</li></ul><ol start="2"><li>임의 액세스 제어(DAC):</li></ol><ul><li>DAC는 리소스 소유자의 재량에 따라 액세스가 결정되는 보다 유연한 액세스 제어 모델입니다.</li><li>리소스 소유자는 리소스에 대한 액세스 권한을 부여하거나 취소할 수 있으며, 사용자나 그룹에 따라 서로 다른 액세스 수준을 할당할 수 있습니다.</li><li>사용자는 자신의 리소스에 대해 더 많은 제어권을 가지며, 신뢰 관계에 따라 다른 사용자에게 액세스 권한을 위임할 수 있습니다.</li><li>DAC는 일반적으로 개인용 컴퓨터나 파일 공유 네트워크와 같이 사용자에게 더 많은 자율성을 부여하고 액세스에 대한 더 강력한 제어가 필요한 시스템에서 사용됩니다.</li></ul><p>RBAC에서는 MAC과 DAC를 모두 액세스 제어 정책의 일부로 구현할 수 있습니다. RBAC는 역할을 정의하고, 역할에 권한을 할당하고, 역할을 사용자 또는 그룹에 매핑하기 위한 프레임워크를 제공합니다. 액세스 제어 결정은 보안 요구 사항과 액세스 권한에 대해 원하는 제어 수준에 따라 MAC 또는 DAC 원칙을 사용하여 시행할 수 있습니다.</p><h2 id="rbac"><a href="#rbac" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>RBAC</h2><p>RBAC provides a framework for defining roles, assigning permissions to roles, and mapping roles to users or groups. 컴퓨터 시스템 보안에서 access control을 위하여 Role을 정의하고, Role이 어떤 일을 할수 있는지를 할당하고, Role을 사용자나 그룹에 매핑하는 프레임워크를 제공한다.</p><p>K8S에서 RBAC은 어떤 Operation을 허용하는지를 결정하는 역할(role)을 생성하고 사용자(ServiceAccount) 에게 Role을 연결(role binding) 하는 권한을 부여한다.</p><p>또 AggregationRule을 사용하여 여러 Role을 집약한 Role을 생성할 수 있어 Role을 관리성을 향상 시킬 수 있다.</p><p>Role, RoleBinding에는 namespace 수준, 클러스터 수준 리소스 두 종류가 있다.</p><p>namespace 수준 리소스</p><ul><li>Role</li><li>RoleBinding</li></ul><p>cluster 수준 리소스</p><ul><li>ClusterRole</li><li>ClusterRoleBinding</li></ul><h3 id="role-clusterrole"><a href="#role-clusterrole" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Role, ClusterRole</h3><p>모두 namespace 범위의 리소스를 대상으로 Authorization 설정을 할 수 있다.</p><p>deploment 리소스 삭제 및 변경 권한이 그 예가 될 수 있다.</p><p>클러스터롤의 경우 그 외 Node,Namespace,PersistenceVolume 과 같은 클러스터 범위의 리소스나 /version, healthz 같은 kubernetes API 정보를 가져오는 nonResourceURL에 대한 권한도 설정할 수 있다.</p><p>Role, ClusterRole을 apply할 때는 apiGroups, resources,verbs 값을 설정하고</p><p>apiGrouips과 resources로 지정된 리소스에 대해 verb로 권한을 authorize(인가)한다.</p><table><thead><tr><th>Verb</th><th>Description</th></tr></thead><tbody><tr><td>*</td><td>모든 verb 포함</td></tr><tr><td>get</td><td>Retrieve information about a resource.</td></tr><tr><td>list</td><td>List multiple resources.</td></tr><tr><td>watch</td><td>Watch for changes to a resource.</td></tr><tr><td>create</td><td>Create a new resource.</td></tr><tr><td>update</td><td>Update an existing resource.</td></tr><tr><td>patch</td><td>Apply changes to a resource.</td></tr><tr><td>delete</td><td>Delete a resource.</td></tr><tr><td>exec</td><td>Execute a command in a container.</td></tr><tr><td>attach</td><td>Attach to a running container.</td></tr><tr><td>port-forward</td><td>Forward local ports to a pod.</td></tr><tr><td>log</td><td>Retrieve logs from a container.</td></tr><tr><td>proxy</td><td>Access the Kubernetes API proxy.</td></tr><tr><td>expose</td><td>Expose a resource as a new service.</td></tr><tr><td>scale</td><td>Scale the number of replicas of a resource.</td></tr><tr><td>rollout</td><td>Manage rollouts of a resource.</td></tr><tr><td>apply</td><td>Apply changes to a resource using a configuration file.</td></tr><tr><td>annotate</td><td>Add or modify annotations of a resource.</td></tr><tr><td>label</td><td>Add or modify labels of a resource.</td></tr><tr><td>attach</td><td>Attach to a running container.</td></tr><tr><td>exec</td><td>Execute a command in a container.</td></tr><tr><td>run</td><td>Run a particular image on the cluster.</td></tr></tbody></table><p>Role과 ClusterRole을 생성할 때는 2가지 주의사항이 있다.</p><ol><li>Deployment에서 Role을 정의할 때 여러가지 apiGroups가 있다.</li></ol><ul><li>extensions/v1beta1, extensions/v1beta2, apps/v1 등으로 변경되어 왔으므로 resources 이름이 같아도 apiGroups를 확인해야 한다.</li><li>deployment 리소스와 deployment/scale 서브 리소스는 개별적으로 지정해야 한다.</li><li>deployment/scale 서브 리소스는 replica 수를 변경하는 scale 처리를 할 수 없다.</li></ul><h4 id="role-resource"><a href="#role-resource" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Role Resource</h4><p><strong>Role</strong></p><p>Role.rules 는 리스트이며, <code>Role</code> 리소스는 namespace를 지정하여 생성한다.</p><p>아래 Role은 default namespace에서 ReplicaSet, Deployment, Deployment/scale 리소스에 대해 모든 권한을 사용할 수 있도록 정의되었다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Role
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>role
</span><span class="code-line">  <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> apps
</span><span class="code-line">      <span class="token punctuation">-</span> extensions
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> replicasets
</span><span class="code-line">      <span class="token punctuation">-</span> deployments
</span><span class="code-line">      <span class="token punctuation">-</span> deployments/scale
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;*&#x27;</span>
</span></code></pre></div><p><strong>Cluster Role</strong> Role과 유사하며, 차이점은 클러스터 수준의 리소스이므로 rules에 nonResourceURLs를 지정할 수 있고, metadata.namespace를 지정할 수 없다는 점이다.</p><p>nonResourceURL은 k8s 리소스의 API가 아니라 health check를 위한 endpoint나 version info 제공 endpoint url 등을 의미한다.</p><p>아래 ClusterRole은 모든 namespace의 replicaset과 depoloyment, 모든 /healthz, /versions 등의 url에 Get을 할 수 있도록 정의되었다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>clusterrole
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> apps
</span><span class="code-line">      <span class="token punctuation">-</span> extensions
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> replicasets
</span><span class="code-line">      <span class="token punctuation">-</span> deployments
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> get
</span><span class="code-line">      <span class="token punctuation">-</span> list
</span><span class="code-line">      <span class="token punctuation">-</span> watch
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">nonResourceURLs</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> /healthz
</span><span class="code-line">      <span class="token punctuation">-</span> /healthz/*
</span><span class="code-line">      <span class="token punctuation">-</span> /version
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> get
</span></code></pre></div><p>ClusterRole의 Aggregation</p><p>ClusterRole은 다른 ClusterRole들의 정의를 읽어서 rule로 정의하는 aggregation 기능이 있다.</p><p>아래 3개 ClusterRole중 name이 sub-clusterrole*인 ClusterRole들을 sample-aggregated-clusterrole이 aggregationRule로 집계하여 정의하였다.</p><p>aggregationRule의 매칭은 labels를 통해 이루어지며, aggregationRule을 사용한 ClusterRole은 반영되지 않는다. 만약 sub-clusterrole1이 변경되었다면 sample-aggregated-clusterrole에도 반영된다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sub<span class="token punctuation">-</span>clusterrole1
</span><span class="code-line">  <span class="token atrule key">labels</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>rbac
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;deployments&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;get&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sub<span class="token punctuation">-</span>clusterrole2
</span><span class="code-line">  <span class="token atrule key">labels</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>rbac
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;services&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;get&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>aggregated<span class="token punctuation">-</span>clusterrole
</span><span class="code-line"><span class="token atrule key">aggregationRule</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">clusterRoleSelectors</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">matchLabels</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">app</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>rbac
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;pods&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;get&#x27;</span><span class="token punctuation">]</span>
</span></code></pre></div><p><strong>ClusterRole preset</strong> 클러스터롤은 몇 가지 preset을 갖고 있다.(기본적으로 준비된 ClusterRole들)</p><table><thead><tr><th>ClusterRole name</th><th>Description</th></tr></thead><tbody><tr><td>cluster-admin</td><td>모든 리소스 관리</td></tr><tr><td>admin</td><td>클러스터롤의 편집 + ns 수준의 RBAC</td></tr><tr><td>edit</td><td>읽기/쓰기</td></tr><tr><td>view</td><td>읽기 전용</td></tr></tbody></table><p>또한 kubernetes의 시스템 구성 요소도 RBAC이 적용되어 system: 으로 시작하는 이름의 클러스터 롤을 사용한다.</p><h3 id="rolebinding-clusterrolebinding"><a href="#rolebinding-clusterrolebinding" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>RoleBinding, ClusterRoleBinding</h3><p>rolebinding은 Role, ClusterRole을 사용자를 연결할 수 있고 ClusterRoleBinding의 경우에는 ClusterRole과 사용자를 연결할 수 있다.</p><p>RoleBinding은 특정 ns에 롤 또는 클러스터롤에서 정의된 권한을 부여하고 ClusterRoleBinding은 모든 ns에 ClusterRole에서 정의된 권한을 부여한다.</p><p>ns를 새로 생성하면 새 ns에 같은 rolebinding을 추가해야 하지만, ClusterRoleBinding을 사용하면 그럴 필요 없이 전에 만들어둔 ClusterRoleBinding을 재사용할 수 있다.</p><p><strong>RoleBinding</strong></p><p>롤바인딩은 ns에 연결되는 리소스로, 사용자에 대해 특정 ns의 Role, ClusterRole에 정의한 권한을 부여한다.</p><p>roleRef에 Role을 지정하고, subject에 사용자에 ServiceAccount를 지정한다. Role은 binding에 1개만 지정가능하고, subject는 여러개 지정 가능하다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> RoleBinding
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>rolebinding
</span><span class="code-line">  <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token atrule key">roleRef</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
</span><span class="code-line">  <span class="token atrule key">kind</span><span class="token punctuation">:</span> Role
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>role
</span><span class="code-line"><span class="token atrule key">subjects</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">kind</span><span class="token punctuation">:</span> ServiceAccount
</span><span class="code-line">    <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>serviceaccount
</span><span class="code-line">    <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span></code></pre></div><p>클러스터롤바인딩은 클러스터수준의 리소스로 모든 네임스페이스 범위에서 클러스터롤로 정의된 권한을 subject에 bind한다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>clusterrolebinding
</span><span class="code-line"><span class="token atrule key">roleRef</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
</span><span class="code-line">  <span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>clusterrole
</span><span class="code-line"><span class="token atrule key">subjects</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">kind</span><span class="token punctuation">:</span> ServiceAccount
</span><span class="code-line">    <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>serviceaccount
</span><span class="code-line">    <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span></code></pre></div><h4 id="rbac-테스트"><a href="#rbac-테스트" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>RBAC 테스트</h4><p>RBAC 테스트용 파드 내부에서 kubectl을 사용할 수 있고, 이전에 생성된 serviceaccount가 연결되었다. sample-serviceaccount에 할당된 권한으로 kubectl을 이용한다.</p><ol><li>sample-serviceaccount, sample-role(default ns에서 replicasets, deployment, deployment/scale 읽기/쓰기 권한) 생성</li><li>sample-rolebinding을 sample-serviceaccount에 연결</li><li>sample-clusterrole 생성(모든 ns에서 replicaset, deployment 읽기)</li><li>sample-clusterrolebinding 으로 sample-serviceaccount 연결</li><li>sample-serviceaccount를 kubectl을 실행가능한 파드에 매핑하여 해당 권한으로 클러스터에 operation test 준비</li></ol><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ServiceAccount
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>serviceaccount
</span><span class="code-line">  <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Role
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>role
</span><span class="code-line">  <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> apps
</span><span class="code-line">      <span class="token punctuation">-</span> extensions
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> replicasets
</span><span class="code-line">      <span class="token punctuation">-</span> deployments
</span><span class="code-line">      <span class="token punctuation">-</span> deployments/scale
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;*&#x27;</span>
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> RoleBinding
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>rolebinding
</span><span class="code-line">  <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token atrule key">roleRef</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
</span><span class="code-line">  <span class="token atrule key">kind</span><span class="token punctuation">:</span> Role
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>role
</span><span class="code-line"><span class="token atrule key">subjects</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">kind</span><span class="token punctuation">:</span> ServiceAccount
</span><span class="code-line">    <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>serviceaccount
</span><span class="code-line">    <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token comment"># replicasets, deployments 읽기 권한</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>clusterrole
</span><span class="code-line"><span class="token atrule key">rules</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">apiGroups</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> apps
</span><span class="code-line">      <span class="token punctuation">-</span> extensions
</span><span class="code-line">    <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> replicasets
</span><span class="code-line">      <span class="token punctuation">-</span> deployments
</span><span class="code-line">    <span class="token atrule key">verbs</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> get
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>clusterrolebinding
</span><span class="code-line"><span class="token atrule key">roleRef</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
</span><span class="code-line">  <span class="token atrule key">kind</span><span class="token punctuation">:</span> ClusterRole
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>clusterrole
</span><span class="code-line"><span class="token atrule key">subjects</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">kind</span><span class="token punctuation">:</span> ServiceAccount
</span><span class="code-line">    <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>serviceaccount
</span><span class="code-line">    <span class="token atrule key">namespace</span><span class="token punctuation">:</span> default
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>kubectl
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">serviceAccountName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>serviceaccount
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> kubectl<span class="token punctuation">-</span>container
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> lachlanevenson/k8s<span class="token punctuation">-</span>kubectl<span class="token punctuation">:</span>v1.10.4
</span><span class="code-line">      <span class="token atrule key">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;sleep&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;86400&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">---</span>
</span></code></pre></div><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">
</span><span class="code-line"><span class="token comment">#컨테이너 내부에서 kubectl을 사용하기 위한 alias 설정</span>
</span><span class="code-line"><span class="token assign-left variable">inkubectl</span><span class="token operator">=</span><span class="token string">&#x27;kubectl exec -it sample-kubectl -- kubectl&#x27;</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># pod에서 요청하여 deployment 생성</span>
</span><span class="code-line"><span class="token comment"># deployments 권한이 있으므로 성공</span>
</span><span class="code-line">inkubectl create deployment nginx --image<span class="token operator">=</span>nginx:1.16
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#replicaset에 scale 권한이 없어 실패</span>
</span><span class="code-line">inkubectl scale replicaset nginx-7ff78f74b9 --replicas <span class="token number">2</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># deployment/scale 권한이 있어 성공</span>
</span><span class="code-line">inkubectl sacle deployment nginx --replicas <span class="token number">2</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#다른 네임스페이스에서 테스트 하기 위한 생성</span>
</span><span class="code-line">kubectl create namespace sample-rbac
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#지정된 ns엔 권한이 없으므로 실패</span>
</span><span class="code-line">inkubectl --namespace sample-rbac create deployment nginx --image<span class="token operator">=</span>nginx:1.16
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#모든 네임스페이스에 deployment 읽기 권한이 있으므로 성공</span>
</span><span class="code-line">inkubectl --namespace sample-rbac get deployments
</span></code></pre></div><p>kubectl로 실행한 사용자가 특정 권한을 가졌는지 확인</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment">#컨테이너 내부의 sample-serviceaccount가 &quot;default&quot; ns에서 deployment를 생성할 수 있는가?</span>
</span><span class="code-line">inkubectl auth can-i create deployment
</span><span class="code-line"><span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#컨테이너 내부의 sample-serviceaccount가 &quot;sample-rbac&quot; ns에서 deployment를 생성할 수 있는가?</span>
</span><span class="code-line">inkubectl auth can-i create deployment --namespace sample-rbac
</span><span class="code-line">no
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#로컬 머신의 권한으로 &quot;sample-rbac&quot; ns의 deployment 생성 권한을 확인</span>
</span><span class="code-line">kubectl auth can-i deployment --namespace sample-rbac
</span><span class="code-line"><span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># --as 옵션을 사용하여 지정된 account 권한 확인</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># &quot;sample-rbac&quot; ns 에서 로컬 머신의 sample-serviceaccount 권한으로 deployment 생성 시도 =&gt; 실패</span>
</span><span class="code-line">kubectl --namespace sample-rbac create deployment nginx --image<span class="token operator">=</span>nginx<span class="token operator">=</span><span class="token number">1.16</span> <span class="token punctuation">\</span>
</span><span class="code-line">--as system:serviceaccount:default:sample-serviceaccount
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># &quot;sample-rbac&quot; ns 에서 로컬 머신의 sample-serviceaccount 권한으로 deployment를 생성할 수 있는지 확인</span>
</span><span class="code-line">kubectl auth can-i create dployment --namespace sample-rbac <span class="token punctuation">\</span>
</span><span class="code-line">--as system:serviceaccount:default:sample-serviceaccount
</span><span class="code-line">no
</span></code></pre></div></div></div><div id="comment"></div><footer><div class="flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base"><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifest-VolumeSnapshot">← <!-- -->K8S manifest - VolumeSnapshot</a></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifest-ServiceAccount">K8S manifest - ServiceAccount<!-- --> →</a></div></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:demian11k@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/demian9k"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>demian11k</div><div> • </div><div>© 2023</div><div> • </div><a href="/static">demian11k studylog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var o=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=\u003el(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=d(s,n))||c.enumerable});return a},y=a=\u003ek(i(l(a!=null?o(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=u((v,t)=\u003e{t.exports=_jsx_runtime});var C={};N(C,{default:()=\u003eR,frontmatter:()=\u003eg});var e=y(r()),g={title:\"K8S manifest - RBAC\",date:new Date(168566778e4),lastmod:\"2023-06-02\",tags:[\"kubernetes\"],draft:!1,summary:\"\",layout:\"PostSimple\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",p:\"p\",ol:\"ol\",li:\"li\",ul:\"ul\",h2:\"h2\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",h4:\"h4\",strong:\"strong\",code:\"code\",pre:\"pre\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h3,{id:\"wiki-\\uC5D0\\uC11C-rbac\\uC758-\\uC815\\uC758\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#wiki-\\uC5D0\\uC11C-rbac\\uC758-\\uC815\\uC758\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"wiki \\uC5D0\\uC11C RBAC\\uC758 \\uC815\\uC758\"]}),(0,e.jsx)(n.p,{children:\"\\uCEF4\\uD4E8\\uD130 \\uC2DC\\uC2A4\\uD15C Security \\uC5D0\\uC11C Role-based access control \\uC740 mandatory access control(MAC) \\uB610\\uB294 discretionary access control(DAC)\\uB97C \\uAD6C\\uD604\\uD568\\uC73C\\uB85C\\uC11C \\uC2DC\\uC2A4\\uD15C\\uC5D0 \\uB300\\uD55C \\uC811\\uADFC\\uC744 \\uC778\\uAC00\\uB41C \\uC0AC\\uC6A9\\uC790\\uC5D0\\uAC8C\\uB9CC \\uD5C8\\uC6A9\\uD558\\uB294 \\uC811\\uADFC\\uBC95\\uC774\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"Role-Based Access Control (RBAC) is a model used for managing access to resources in computer systems. RBAC itself does not directly enforce any access control mechanisms, but it provides a framework for organizing access control policies. Mandatory Access Control (MAC) and Discretionary Access Control (DAC) are two different types of access control mechanisms that can be implemented within the RBAC framework. Here's how they differ:\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"Mandatory Access Control (MAC):\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"MAC is a strict access control model where access decisions are made based on a set of predefined rules and policies.\"}),(0,e.jsx)(n.li,{children:\"Access to resources is determined by the system based on labels or classifications assigned to subjects (users or processes) and objects (resources or files).\"}),(0,e.jsx)(n.li,{children:\"The access decisions are usually made by a central authority or security administrator, and users have little or no control over granting or revoking access permissions.\"}),(0,e.jsx)(n.li,{children:\"MAC is typically used in environments with high-security requirements, such as government or military systems, where access control decisions are critical and need to be strictly enforced.\"})]}),(0,e.jsx)(n.ol,{start:\"2\",children:(0,e.jsx)(n.li,{children:\"Discretionary Access Control (DAC):\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"DAC is a more flexible access control model where access decisions are at the discretion of the resource owner.\"}),(0,e.jsx)(n.li,{children:\"The resource owner has control over granting or revoking access permissions to their resources, and they can assign different access levels to different users or groups.\"}),(0,e.jsx)(n.li,{children:\"Users have more control over their own resources, and they can delegate access permissions to other users based on their trust relationships.\"}),(0,e.jsx)(n.li,{children:\"DAC is commonly used in systems where users have more autonomy and need greater control over access, such as personal computers or file-sharing networks.\"})]}),(0,e.jsx)(n.p,{children:\"In RBAC, both MAC and DAC can be implemented as part of the access control policy. RBAC provides a framework for defining roles, assigning permissions to roles, and mapping roles to users or groups. The access control decisions can be enforced using MAC or DAC principles, depending on the security requirements and the level of control desired over access permissions.\"}),(0,e.jsx)(n.p,{children:\"\\uC5ED\\uD560 \\uAE30\\uBC18 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4(RBAC)\\uB294 \\uCEF4\\uD4E8\\uD130 \\uC2DC\\uC2A4\\uD15C\\uC5D0\\uC11C \\uB9AC\\uC18C\\uC2A4\\uC5D0 \\uB300\\uD55C \\uC561\\uC138\\uC2A4\\uB97C \\uAD00\\uB9AC\\uD558\\uB294 \\uB370 \\uC0AC\\uC6A9\\uB418\\uB294 \\uBAA8\\uB378\\uC785\\uB2C8\\uB2E4. RBAC \\uC790\\uCCB4\\uB294 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uBA54\\uCEE4\\uB2C8\\uC998\\uC744 \\uC9C1\\uC811 \\uC2DC\\uD589\\uD558\\uC9C0\\uB294 \\uC54A\\uC9C0\\uB9CC \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uC815\\uCC45\\uC744 \\uAD6C\\uC131\\uD558\\uAE30 \\uC704\\uD55C \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uB97C \\uC81C\\uACF5\\uD569\\uB2C8\\uB2E4. MAC(\\uD544\\uC218 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4)\\uC640 DAC(\\uC784\\uC758 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4)\\uB294 RBAC \\uD504\\uB808\\uC784\\uC6CC\\uD06C \\uB0B4\\uC5D0\\uC11C \\uAD6C\\uD604\\uD560 \\uC218 \\uC788\\uB294 \\uB450 \\uAC00\\uC9C0 \\uC720\\uD615\\uC758 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uBA54\\uCEE4\\uB2C8\\uC998\\uC785\\uB2C8\\uB2E4. \\uB450 \\uBA54\\uCEE4\\uB2C8\\uC998\\uC758 \\uCC28\\uC774\\uC810\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4:\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"\\uD544\\uC218 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4(MAC):\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"MAC\\uC740 \\uC0AC\\uC804 \\uC815\\uC758\\uB41C \\uC77C\\uB828\\uC758 \\uADDC\\uCE59\\uACFC \\uC815\\uCC45\\uC5D0 \\uB530\\uB77C \\uC561\\uC138\\uC2A4 \\uACB0\\uC815\\uC774 \\uB0B4\\uB824\\uC9C0\\uB294 \\uC5C4\\uACA9\\uD55C \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uBAA8\\uB378\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uB9AC\\uC18C\\uC2A4\\uC5D0 \\uB300\\uD55C \\uC561\\uC138\\uC2A4\\uB294 \\uC8FC\\uCCB4(\\uC0AC\\uC6A9\\uC790 \\uB610\\uB294 \\uD504\\uB85C\\uC138\\uC2A4) \\uBC0F \\uAC1D\\uCCB4(\\uB9AC\\uC18C\\uC2A4 \\uB610\\uB294 \\uD30C\\uC77C)\\uC5D0 \\uD560\\uB2F9\\uB41C \\uB808\\uC774\\uBE14 \\uB610\\uB294 \\uBD84\\uB958\\uB97C \\uAE30\\uBC18\\uC73C\\uB85C \\uC2DC\\uC2A4\\uD15C\\uC5D0 \\uC758\\uD574 \\uACB0\\uC815\\uB429\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uC561\\uC138\\uC2A4 \\uACB0\\uC815\\uC740 \\uC77C\\uBC18\\uC801\\uC73C\\uB85C \\uC911\\uC559 \\uAE30\\uAD00 \\uB610\\uB294 \\uBCF4\\uC548 \\uAD00\\uB9AC\\uC790\\uAC00 \\uB0B4\\uB9AC\\uBA70, \\uC0AC\\uC6A9\\uC790\\uB294 \\uC561\\uC138\\uC2A4 \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC\\uD558\\uAC70\\uB098 \\uCDE8\\uC18C\\uD560 \\uC218 \\uC788\\uB294 \\uAD8C\\uD55C\\uC774 \\uAC70\\uC758 \\uB610\\uB294 \\uC804\\uD600 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"MAC\\uC740 \\uC77C\\uBC18\\uC801\\uC73C\\uB85C \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uACB0\\uC815\\uC774 \\uC911\\uC694\\uD558\\uACE0 \\uC5C4\\uACA9\\uD558\\uAC8C \\uC801\\uC6A9\\uD574\\uC57C \\uD558\\uB294 \\uC815\\uBD80 \\uB610\\uB294 \\uAD70\\uC0AC \\uC2DC\\uC2A4\\uD15C\\uACFC \\uAC19\\uC774 \\uBCF4\\uC548 \\uC694\\uAD6C \\uC0AC\\uD56D\\uC774 \\uB192\\uC740 \\uD658\\uACBD\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uB429\\uB2C8\\uB2E4.\"})]}),(0,e.jsx)(n.ol,{start:\"2\",children:(0,e.jsx)(n.li,{children:\"\\uC784\\uC758 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4(DAC):\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"DAC\\uB294 \\uB9AC\\uC18C\\uC2A4 \\uC18C\\uC720\\uC790\\uC758 \\uC7AC\\uB7C9\\uC5D0 \\uB530\\uB77C \\uC561\\uC138\\uC2A4\\uAC00 \\uACB0\\uC815\\uB418\\uB294 \\uBCF4\\uB2E4 \\uC720\\uC5F0\\uD55C \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uBAA8\\uB378\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uB9AC\\uC18C\\uC2A4 \\uC18C\\uC720\\uC790\\uB294 \\uB9AC\\uC18C\\uC2A4\\uC5D0 \\uB300\\uD55C \\uC561\\uC138\\uC2A4 \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC\\uD558\\uAC70\\uB098 \\uCDE8\\uC18C\\uD560 \\uC218 \\uC788\\uC73C\\uBA70, \\uC0AC\\uC6A9\\uC790\\uB098 \\uADF8\\uB8F9\\uC5D0 \\uB530\\uB77C \\uC11C\\uB85C \\uB2E4\\uB978 \\uC561\\uC138\\uC2A4 \\uC218\\uC900\\uC744 \\uD560\\uB2F9\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uC0AC\\uC6A9\\uC790\\uB294 \\uC790\\uC2E0\\uC758 \\uB9AC\\uC18C\\uC2A4\\uC5D0 \\uB300\\uD574 \\uB354 \\uB9CE\\uC740 \\uC81C\\uC5B4\\uAD8C\\uC744 \\uAC00\\uC9C0\\uBA70, \\uC2E0\\uB8B0 \\uAD00\\uACC4\\uC5D0 \\uB530\\uB77C \\uB2E4\\uB978 \\uC0AC\\uC6A9\\uC790\\uC5D0\\uAC8C \\uC561\\uC138\\uC2A4 \\uAD8C\\uD55C\\uC744 \\uC704\\uC784\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"DAC\\uB294 \\uC77C\\uBC18\\uC801\\uC73C\\uB85C \\uAC1C\\uC778\\uC6A9 \\uCEF4\\uD4E8\\uD130\\uB098 \\uD30C\\uC77C \\uACF5\\uC720 \\uB124\\uD2B8\\uC6CC\\uD06C\\uC640 \\uAC19\\uC774 \\uC0AC\\uC6A9\\uC790\\uC5D0\\uAC8C \\uB354 \\uB9CE\\uC740 \\uC790\\uC728\\uC131\\uC744 \\uBD80\\uC5EC\\uD558\\uACE0 \\uC561\\uC138\\uC2A4\\uC5D0 \\uB300\\uD55C \\uB354 \\uAC15\\uB825\\uD55C \\uC81C\\uC5B4\\uAC00 \\uD544\\uC694\\uD55C \\uC2DC\\uC2A4\\uD15C\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uB429\\uB2C8\\uB2E4.\"})]}),(0,e.jsx)(n.p,{children:\"RBAC\\uC5D0\\uC11C\\uB294 MAC\\uACFC DAC\\uB97C \\uBAA8\\uB450 \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uC815\\uCC45\\uC758 \\uC77C\\uBD80\\uB85C \\uAD6C\\uD604\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4. RBAC\\uB294 \\uC5ED\\uD560\\uC744 \\uC815\\uC758\\uD558\\uACE0, \\uC5ED\\uD560\\uC5D0 \\uAD8C\\uD55C\\uC744 \\uD560\\uB2F9\\uD558\\uACE0, \\uC5ED\\uD560\\uC744 \\uC0AC\\uC6A9\\uC790 \\uB610\\uB294 \\uADF8\\uB8F9\\uC5D0 \\uB9E4\\uD551\\uD558\\uAE30 \\uC704\\uD55C \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uB97C \\uC81C\\uACF5\\uD569\\uB2C8\\uB2E4. \\uC561\\uC138\\uC2A4 \\uC81C\\uC5B4 \\uACB0\\uC815\\uC740 \\uBCF4\\uC548 \\uC694\\uAD6C \\uC0AC\\uD56D\\uACFC \\uC561\\uC138\\uC2A4 \\uAD8C\\uD55C\\uC5D0 \\uB300\\uD574 \\uC6D0\\uD558\\uB294 \\uC81C\\uC5B4 \\uC218\\uC900\\uC5D0 \\uB530\\uB77C MAC \\uB610\\uB294 DAC \\uC6D0\\uCE59\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uC2DC\\uD589\\uD560 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"rbac\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#rbac\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"RBAC\"]}),(0,e.jsx)(n.p,{children:\"RBAC provides a framework for defining roles, assigning permissions to roles, and mapping roles to users or groups. \\uCEF4\\uD4E8\\uD130 \\uC2DC\\uC2A4\\uD15C \\uBCF4\\uC548\\uC5D0\\uC11C access control\\uC744 \\uC704\\uD558\\uC5EC Role\\uC744 \\uC815\\uC758\\uD558\\uACE0, Role\\uC774 \\uC5B4\\uB5A4 \\uC77C\\uC744 \\uD560\\uC218 \\uC788\\uB294\\uC9C0\\uB97C \\uD560\\uB2F9\\uD558\\uACE0, Role\\uC744 \\uC0AC\\uC6A9\\uC790\\uB098 \\uADF8\\uB8F9\\uC5D0 \\uB9E4\\uD551\\uD558\\uB294 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uB97C \\uC81C\\uACF5\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"K8S\\uC5D0\\uC11C RBAC\\uC740 \\uC5B4\\uB5A4 Operation\\uC744 \\uD5C8\\uC6A9\\uD558\\uB294\\uC9C0\\uB97C \\uACB0\\uC815\\uD558\\uB294 \\uC5ED\\uD560(role)\\uC744 \\uC0DD\\uC131\\uD558\\uACE0 \\uC0AC\\uC6A9\\uC790(ServiceAccount) \\uC5D0\\uAC8C Role\\uC744 \\uC5F0\\uACB0(role binding) \\uD558\\uB294 \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uB610 AggregationRule\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uC5EC\\uB7EC Role\\uC744 \\uC9D1\\uC57D\\uD55C Role\\uC744 \\uC0DD\\uC131\\uD560 \\uC218 \\uC788\\uC5B4 Role\\uC744 \\uAD00\\uB9AC\\uC131\\uC744 \\uD5A5\\uC0C1 \\uC2DC\\uD0AC \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"Role, RoleBinding\\uC5D0\\uB294 namespace \\uC218\\uC900, \\uD074\\uB7EC\\uC2A4\\uD130 \\uC218\\uC900 \\uB9AC\\uC18C\\uC2A4 \\uB450 \\uC885\\uB958\\uAC00 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"namespace \\uC218\\uC900 \\uB9AC\\uC18C\\uC2A4\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Role\"}),(0,e.jsx)(n.li,{children:\"RoleBinding\"})]}),(0,e.jsx)(n.p,{children:\"cluster \\uC218\\uC900 \\uB9AC\\uC18C\\uC2A4\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"ClusterRole\"}),(0,e.jsx)(n.li,{children:\"ClusterRoleBinding\"})]}),(0,e.jsxs)(n.h3,{id:\"role-clusterrole\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#role-clusterrole\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Role, ClusterRole\"]}),(0,e.jsx)(n.p,{children:\"\\uBAA8\\uB450 namespace \\uBC94\\uC704\\uC758 \\uB9AC\\uC18C\\uC2A4\\uB97C \\uB300\\uC0C1\\uC73C\\uB85C Authorization \\uC124\\uC815\\uC744 \\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"deploment \\uB9AC\\uC18C\\uC2A4 \\uC0AD\\uC81C \\uBC0F \\uBCC0\\uACBD \\uAD8C\\uD55C\\uC774 \\uADF8 \\uC608\\uAC00 \\uB420 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uD074\\uB7EC\\uC2A4\\uD130\\uB864\\uC758 \\uACBD\\uC6B0 \\uADF8 \\uC678 Node,Namespace,PersistenceVolume \\uACFC \\uAC19\\uC740 \\uD074\\uB7EC\\uC2A4\\uD130 \\uBC94\\uC704\\uC758 \\uB9AC\\uC18C\\uC2A4\\uB098 /version, healthz \\uAC19\\uC740 kubernetes API \\uC815\\uBCF4\\uB97C \\uAC00\\uC838\\uC624\\uB294 nonResourceURL\\uC5D0 \\uB300\\uD55C \\uAD8C\\uD55C\\uB3C4 \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"Role, ClusterRole\\uC744 apply\\uD560 \\uB54C\\uB294 apiGroups, resources,verbs \\uAC12\\uC744 \\uC124\\uC815\\uD558\\uACE0\"}),(0,e.jsx)(n.p,{children:\"apiGrouips\\uACFC resources\\uB85C \\uC9C0\\uC815\\uB41C \\uB9AC\\uC18C\\uC2A4\\uC5D0 \\uB300\\uD574 verb\\uB85C \\uAD8C\\uD55C\\uC744 authorize(\\uC778\\uAC00)\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"Verb\"}),(0,e.jsx)(n.th,{children:\"Description\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"*\"}),(0,e.jsx)(n.td,{children:\"\\uBAA8\\uB4E0 verb \\uD3EC\\uD568\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"get\"}),(0,e.jsx)(n.td,{children:\"Retrieve information about a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"list\"}),(0,e.jsx)(n.td,{children:\"List multiple resources.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"watch\"}),(0,e.jsx)(n.td,{children:\"Watch for changes to a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"create\"}),(0,e.jsx)(n.td,{children:\"Create a new resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"update\"}),(0,e.jsx)(n.td,{children:\"Update an existing resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"patch\"}),(0,e.jsx)(n.td,{children:\"Apply changes to a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"delete\"}),(0,e.jsx)(n.td,{children:\"Delete a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"exec\"}),(0,e.jsx)(n.td,{children:\"Execute a command in a container.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"attach\"}),(0,e.jsx)(n.td,{children:\"Attach to a running container.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"port-forward\"}),(0,e.jsx)(n.td,{children:\"Forward local ports to a pod.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"log\"}),(0,e.jsx)(n.td,{children:\"Retrieve logs from a container.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"proxy\"}),(0,e.jsx)(n.td,{children:\"Access the Kubernetes API proxy.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"expose\"}),(0,e.jsx)(n.td,{children:\"Expose a resource as a new service.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"scale\"}),(0,e.jsx)(n.td,{children:\"Scale the number of replicas of a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"rollout\"}),(0,e.jsx)(n.td,{children:\"Manage rollouts of a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"apply\"}),(0,e.jsx)(n.td,{children:\"Apply changes to a resource using a configuration file.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"annotate\"}),(0,e.jsx)(n.td,{children:\"Add or modify annotations of a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"label\"}),(0,e.jsx)(n.td,{children:\"Add or modify labels of a resource.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"attach\"}),(0,e.jsx)(n.td,{children:\"Attach to a running container.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"exec\"}),(0,e.jsx)(n.td,{children:\"Execute a command in a container.\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"run\"}),(0,e.jsx)(n.td,{children:\"Run a particular image on the cluster.\"})]})]})]}),(0,e.jsx)(n.p,{children:\"Role\\uACFC ClusterRole\\uC744 \\uC0DD\\uC131\\uD560 \\uB54C\\uB294 2\\uAC00\\uC9C0 \\uC8FC\\uC758\\uC0AC\\uD56D\\uC774 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"Deployment\\uC5D0\\uC11C Role\\uC744 \\uC815\\uC758\\uD560 \\uB54C \\uC5EC\\uB7EC\\uAC00\\uC9C0 apiGroups\\uAC00 \\uC788\\uB2E4.\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"extensions/v1beta1, extensions/v1beta2, apps/v1 \\uB4F1\\uC73C\\uB85C \\uBCC0\\uACBD\\uB418\\uC5B4 \\uC654\\uC73C\\uBBC0\\uB85C resources \\uC774\\uB984\\uC774 \\uAC19\\uC544\\uB3C4 apiGroups\\uB97C \\uD655\\uC778\\uD574\\uC57C \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"deployment \\uB9AC\\uC18C\\uC2A4\\uC640 deployment/scale \\uC11C\\uBE0C \\uB9AC\\uC18C\\uC2A4\\uB294 \\uAC1C\\uBCC4\\uC801\\uC73C\\uB85C \\uC9C0\\uC815\\uD574\\uC57C \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"deployment/scale \\uC11C\\uBE0C \\uB9AC\\uC18C\\uC2A4\\uB294 replica \\uC218\\uB97C \\uBCC0\\uACBD\\uD558\\uB294 scale \\uCC98\\uB9AC\\uB97C \\uD560 \\uC218 \\uC5C6\\uB2E4.\"})]}),(0,e.jsxs)(n.h4,{id:\"role-resource\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#role-resource\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Role Resource\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Role\"})}),(0,e.jsxs)(n.p,{children:[\"Role.rules \\uB294 \\uB9AC\\uC2A4\\uD2B8\\uC774\\uBA70, \",(0,e.jsx)(n.code,{children:\"Role\"}),\" \\uB9AC\\uC18C\\uC2A4\\uB294 namespace\\uB97C \\uC9C0\\uC815\\uD558\\uC5EC \\uC0DD\\uC131\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798 Role\\uC740 default namespace\\uC5D0\\uC11C ReplicaSet, Deployment, Deployment/scale \\uB9AC\\uC18C\\uC2A4\\uC5D0 \\uB300\\uD574 \\uBAA8\\uB4E0 \\uAD8C\\uD55C\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC815\\uC758\\uB418\\uC5C8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` apps\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` extensions\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` replicasets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` deployments\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` deployments/scale\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'*'\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Cluster Role\"}),\" Role\\uACFC \\uC720\\uC0AC\\uD558\\uBA70, \\uCC28\\uC774\\uC810\\uC740 \\uD074\\uB7EC\\uC2A4\\uD130 \\uC218\\uC900\\uC758 \\uB9AC\\uC18C\\uC2A4\\uC774\\uBBC0\\uB85C rules\\uC5D0 nonResourceURLs\\uB97C \\uC9C0\\uC815\\uD560 \\uC218 \\uC788\\uACE0, metadata.namespace\\uB97C \\uC9C0\\uC815\\uD560 \\uC218 \\uC5C6\\uB2E4\\uB294 \\uC810\\uC774\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"nonResourceURL\\uC740 k8s \\uB9AC\\uC18C\\uC2A4\\uC758 API\\uAC00 \\uC544\\uB2C8\\uB77C health check\\uB97C \\uC704\\uD55C endpoint\\uB098 version info \\uC81C\\uACF5 endpoint url \\uB4F1\\uC744 \\uC758\\uBBF8\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798 ClusterRole\\uC740 \\uBAA8\\uB4E0 namespace\\uC758 replicaset\\uACFC depoloyment, \\uBAA8\\uB4E0 /healthz, /versions \\uB4F1\\uC758 url\\uC5D0 Get\\uC744 \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC815\\uC758\\uB418\\uC5C8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` apps\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` extensions\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` replicasets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` deployments\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` get\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` list\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` watch\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nonResourceURLs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /healthz\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /healthz/*\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /version\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` get\n`]})]})}),(0,e.jsx)(n.p,{children:\"ClusterRole\\uC758 Aggregation\"}),(0,e.jsx)(n.p,{children:\"ClusterRole\\uC740 \\uB2E4\\uB978 ClusterRole\\uB4E4\\uC758 \\uC815\\uC758\\uB97C \\uC77D\\uC5B4\\uC11C rule\\uB85C \\uC815\\uC758\\uD558\\uB294 aggregation \\uAE30\\uB2A5\\uC774 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798 3\\uAC1C ClusterRole\\uC911 name\\uC774 sub-clusterrole*\\uC778 ClusterRole\\uB4E4\\uC744 sample-aggregated-clusterrole\\uC774 aggregationRule\\uB85C \\uC9D1\\uACC4\\uD558\\uC5EC \\uC815\\uC758\\uD558\\uC600\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"aggregationRule\\uC758 \\uB9E4\\uCE6D\\uC740 labels\\uB97C \\uD1B5\\uD574 \\uC774\\uB8E8\\uC5B4\\uC9C0\\uBA70, aggregationRule\\uC744 \\uC0AC\\uC6A9\\uD55C ClusterRole\\uC740 \\uBC18\\uC601\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4. \\uB9CC\\uC57D sub-clusterrole1\\uC774 \\uBCC0\\uACBD\\uB418\\uC5C8\\uB2E4\\uBA74 sample-aggregated-clusterrole\\uC5D0\\uB3C4 \\uBC18\\uC601\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sub\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`rbac\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'deployments'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'get'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sub\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`rbac\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'services'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'get'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"aggregated\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"aggregationRule\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"clusterRoleSelectors\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"matchLabels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`rbac\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'pods'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'get'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"ClusterRole preset\"}),\" \\uD074\\uB7EC\\uC2A4\\uD130\\uB864\\uC740 \\uBA87 \\uAC00\\uC9C0 preset\\uC744 \\uAC16\\uACE0 \\uC788\\uB2E4.(\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC900\\uBE44\\uB41C ClusterRole\\uB4E4)\"]}),(0,e.jsxs)(n.table,{children:[(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:\"ClusterRole name\"}),(0,e.jsx)(n.th,{children:\"Description\"})]})}),(0,e.jsxs)(n.tbody,{children:[(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"cluster-admin\"}),(0,e.jsx)(n.td,{children:\"\\uBAA8\\uB4E0 \\uB9AC\\uC18C\\uC2A4 \\uAD00\\uB9AC\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"admin\"}),(0,e.jsx)(n.td,{children:\"\\uD074\\uB7EC\\uC2A4\\uD130\\uB864\\uC758 \\uD3B8\\uC9D1 + ns \\uC218\\uC900\\uC758 RBAC\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"edit\"}),(0,e.jsx)(n.td,{children:\"\\uC77D\\uAE30/\\uC4F0\\uAE30\"})]}),(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.td,{children:\"view\"}),(0,e.jsx)(n.td,{children:\"\\uC77D\\uAE30 \\uC804\\uC6A9\"})]})]})]}),(0,e.jsx)(n.p,{children:\"\\uB610\\uD55C kubernetes\\uC758 \\uC2DC\\uC2A4\\uD15C \\uAD6C\\uC131 \\uC694\\uC18C\\uB3C4 RBAC\\uC774 \\uC801\\uC6A9\\uB418\\uC5B4 system: \\uC73C\\uB85C \\uC2DC\\uC791\\uD558\\uB294 \\uC774\\uB984\\uC758 \\uD074\\uB7EC\\uC2A4\\uD130 \\uB864\\uC744 \\uC0AC\\uC6A9\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.h3,{id:\"rolebinding-clusterrolebinding\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#rolebinding-clusterrolebinding\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"RoleBinding, ClusterRoleBinding\"]}),(0,e.jsx)(n.p,{children:\"rolebinding\\uC740 Role, ClusterRole\\uC744 \\uC0AC\\uC6A9\\uC790\\uB97C \\uC5F0\\uACB0\\uD560 \\uC218 \\uC788\\uACE0 ClusterRoleBinding\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 ClusterRole\\uACFC \\uC0AC\\uC6A9\\uC790\\uB97C \\uC5F0\\uACB0\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"RoleBinding\\uC740 \\uD2B9\\uC815 ns\\uC5D0 \\uB864 \\uB610\\uB294 \\uD074\\uB7EC\\uC2A4\\uD130\\uB864\\uC5D0\\uC11C \\uC815\\uC758\\uB41C \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC\\uD558\\uACE0 ClusterRoleBinding\\uC740 \\uBAA8\\uB4E0 ns\\uC5D0 ClusterRole\\uC5D0\\uC11C \\uC815\\uC758\\uB41C \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"ns\\uB97C \\uC0C8\\uB85C \\uC0DD\\uC131\\uD558\\uBA74 \\uC0C8 ns\\uC5D0 \\uAC19\\uC740 rolebinding\\uC744 \\uCD94\\uAC00\\uD574\\uC57C \\uD558\\uC9C0\\uB9CC, ClusterRoleBinding\\uC744 \\uC0AC\\uC6A9\\uD558\\uBA74 \\uADF8\\uB7F4 \\uD544\\uC694 \\uC5C6\\uC774 \\uC804\\uC5D0 \\uB9CC\\uB4E4\\uC5B4\\uB454 ClusterRoleBinding\\uC744 \\uC7AC\\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"RoleBinding\"})}),(0,e.jsx)(n.p,{children:\"\\uB864\\uBC14\\uC778\\uB529\\uC740 ns\\uC5D0 \\uC5F0\\uACB0\\uB418\\uB294 \\uB9AC\\uC18C\\uC2A4\\uB85C, \\uC0AC\\uC6A9\\uC790\\uC5D0 \\uB300\\uD574 \\uD2B9\\uC815 ns\\uC758 Role, ClusterRole\\uC5D0 \\uC815\\uC758\\uD55C \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"roleRef\\uC5D0 Role\\uC744 \\uC9C0\\uC815\\uD558\\uACE0, subject\\uC5D0 \\uC0AC\\uC6A9\\uC790\\uC5D0 ServiceAccount\\uB97C \\uC9C0\\uC815\\uD55C\\uB2E4. Role\\uC740 binding\\uC5D0 1\\uAC1C\\uB9CC \\uC9C0\\uC815\\uAC00\\uB2A5\\uD558\\uACE0, subject\\uB294 \\uC5EC\\uB7EC\\uAC1C \\uC9C0\\uC815 \\uAC00\\uB2A5\\uD558\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` RoleBinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`rolebinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"roleRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"subjects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ServiceAccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`serviceaccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uD074\\uB7EC\\uC2A4\\uD130\\uB864\\uBC14\\uC778\\uB529\\uC740 \\uD074\\uB7EC\\uC2A4\\uD130\\uC218\\uC900\\uC758 \\uB9AC\\uC18C\\uC2A4\\uB85C \\uBAA8\\uB4E0 \\uB124\\uC784\\uC2A4\\uD398\\uC774\\uC2A4 \\uBC94\\uC704\\uC5D0\\uC11C \\uD074\\uB7EC\\uC2A4\\uD130\\uB864\\uB85C \\uC815\\uC758\\uB41C \\uAD8C\\uD55C\\uC744 subject\\uC5D0 bind\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRoleBinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrolebinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"roleRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"subjects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ServiceAccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`serviceaccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"rbac-\\uD14C\\uC2A4\\uD2B8\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#rbac-\\uD14C\\uC2A4\\uD2B8\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"RBAC \\uD14C\\uC2A4\\uD2B8\"]}),(0,e.jsx)(n.p,{children:\"RBAC \\uD14C\\uC2A4\\uD2B8\\uC6A9 \\uD30C\\uB4DC \\uB0B4\\uBD80\\uC5D0\\uC11C kubectl\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uACE0, \\uC774\\uC804\\uC5D0 \\uC0DD\\uC131\\uB41C serviceaccount\\uAC00 \\uC5F0\\uACB0\\uB418\\uC5C8\\uB2E4. sample-serviceaccount\\uC5D0 \\uD560\\uB2F9\\uB41C \\uAD8C\\uD55C\\uC73C\\uB85C kubectl\\uC744 \\uC774\\uC6A9\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"sample-serviceaccount, sample-role(default ns\\uC5D0\\uC11C replicasets, deployment, deployment/scale \\uC77D\\uAE30/\\uC4F0\\uAE30 \\uAD8C\\uD55C) \\uC0DD\\uC131\"}),(0,e.jsx)(n.li,{children:\"sample-rolebinding\\uC744 sample-serviceaccount\\uC5D0 \\uC5F0\\uACB0\"}),(0,e.jsx)(n.li,{children:\"sample-clusterrole \\uC0DD\\uC131(\\uBAA8\\uB4E0 ns\\uC5D0\\uC11C replicaset, deployment \\uC77D\\uAE30)\"}),(0,e.jsx)(n.li,{children:\"sample-clusterrolebinding \\uC73C\\uB85C sample-serviceaccount \\uC5F0\\uACB0\"}),(0,e.jsx)(n.li,{children:\"sample-serviceaccount\\uB97C kubectl\\uC744 \\uC2E4\\uD589\\uAC00\\uB2A5\\uD55C \\uD30C\\uB4DC\\uC5D0 \\uB9E4\\uD551\\uD558\\uC5EC \\uD574\\uB2F9 \\uAD8C\\uD55C\\uC73C\\uB85C \\uD074\\uB7EC\\uC2A4\\uD130\\uC5D0 operation test \\uC900\\uBE44\"})]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ServiceAccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`serviceaccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` apps\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` extensions\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` replicasets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` deployments\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` deployments/scale\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'*'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` RoleBinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`rolebinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"roleRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`role\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"subjects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ServiceAccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`serviceaccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# replicasets, deployments \\uC77D\\uAE30 \\uAD8C\\uD55C\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"rules\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroups\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` apps\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` extensions\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` replicasets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` deployments\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` get\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRoleBinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrolebinding\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"roleRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiGroup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rbac.authorization.k8s.io\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterRole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterrole\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"subjects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ServiceAccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`serviceaccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`kubectl\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"serviceAccountName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`serviceaccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kubectl\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" lachlanevenson/k8s\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"kubectl\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`v1.10.4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'sleep'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'86400'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\\uCEE8\\uD14C\\uC774\\uB108 \\uB0B4\\uBD80\\uC5D0\\uC11C kubectl\\uC744 \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD55C alias \\uC124\\uC815\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"inkubectl\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'kubectl exec -it sample-kubectl -- kubectl'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# pod\\uC5D0\\uC11C \\uC694\\uCCAD\\uD558\\uC5EC deployment \\uC0DD\\uC131\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# deployments \\uAD8C\\uD55C\\uC774 \\uC788\\uC73C\\uBBC0\\uB85C \\uC131\\uACF5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"inkubectl create deployment nginx --image\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`nginx:1.16\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#replicaset\\uC5D0 scale \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC5B4 \\uC2E4\\uD328\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"inkubectl scale replicaset nginx-7ff78f74b9 --replicas \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# deployment/scale \\uAD8C\\uD55C\\uC774 \\uC788\\uC5B4 \\uC131\\uACF5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"inkubectl sacle deployment nginx --replicas \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\\uB2E4\\uB978 \\uB124\\uC784\\uC2A4\\uD398\\uC774\\uC2A4\\uC5D0\\uC11C \\uD14C\\uC2A4\\uD2B8 \\uD558\\uAE30 \\uC704\\uD55C \\uC0DD\\uC131\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl create namespace sample-rbac\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\\uC9C0\\uC815\\uB41C ns\\uC5D4 \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC73C\\uBBC0\\uB85C \\uC2E4\\uD328\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"inkubectl --namespace sample-rbac create deployment nginx --image\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`nginx:1.16\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\\uBAA8\\uB4E0 \\uB124\\uC784\\uC2A4\\uD398\\uC774\\uC2A4\\uC5D0 deployment \\uC77D\\uAE30 \\uAD8C\\uD55C\\uC774 \\uC788\\uC73C\\uBBC0\\uB85C \\uC131\\uACF5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`inkubectl --namespace sample-rbac get deployments\n`})]})}),(0,e.jsx)(n.p,{children:\"kubectl\\uB85C \\uC2E4\\uD589\\uD55C \\uC0AC\\uC6A9\\uC790\\uAC00 \\uD2B9\\uC815 \\uAD8C\\uD55C\\uC744 \\uAC00\\uC84C\\uB294\\uC9C0 \\uD655\\uC778\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:'#\\uCEE8\\uD14C\\uC774\\uB108 \\uB0B4\\uBD80\\uC758 sample-serviceaccount\\uAC00 \"default\" ns\\uC5D0\\uC11C deployment\\uB97C \\uC0DD\\uC131\\uD560 \\uC218 \\uC788\\uB294\\uAC00?'}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`inkubectl auth can-i create deployment\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"yes\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:'#\\uCEE8\\uD14C\\uC774\\uB108 \\uB0B4\\uBD80\\uC758 sample-serviceaccount\\uAC00 \"sample-rbac\" ns\\uC5D0\\uC11C deployment\\uB97C \\uC0DD\\uC131\\uD560 \\uC218 \\uC788\\uB294\\uAC00?'}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`inkubectl auth can-i create deployment --namespace sample-rbac\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`no\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:'#\\uB85C\\uCEEC \\uBA38\\uC2E0\\uC758 \\uAD8C\\uD55C\\uC73C\\uB85C \"sample-rbac\" ns\\uC758 deployment \\uC0DD\\uC131 \\uAD8C\\uD55C\\uC744 \\uD655\\uC778'}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl auth can-i deployment --namespace sample-rbac\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"yes\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# --as \\uC635\\uC158\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uC9C0\\uC815\\uB41C account \\uAD8C\\uD55C \\uD655\\uC778\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:'# \"sample-rbac\" ns \\uC5D0\\uC11C \\uB85C\\uCEEC \\uBA38\\uC2E0\\uC758 sample-serviceaccount \\uAD8C\\uD55C\\uC73C\\uB85C deployment \\uC0DD\\uC131 \\uC2DC\\uB3C4 =\u003e \\uC2E4\\uD328'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl --namespace sample-rbac create deployment nginx --image\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"nginx\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`--as system:serviceaccount:default:sample-serviceaccount\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:'# \"sample-rbac\" ns \\uC5D0\\uC11C \\uB85C\\uCEEC \\uBA38\\uC2E0\\uC758 sample-serviceaccount \\uAD8C\\uD55C\\uC73C\\uB85C deployment\\uB97C \\uC0DD\\uC131\\uD560 \\uC218 \\uC788\\uB294\\uC9C0 \\uD655\\uC778'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl auth can-i create dployment --namespace sample-rbac \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`--as system:serviceaccount:default:sample-serviceaccount\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`no\n`})]})})]})}}var R=b;return C;})();\n;return Component;","toc":[{"value":"wiki 에서 RBAC의 정의","url":"#wiki-에서-rbac의-정의","depth":3},{"value":"RBAC","url":"#rbac","depth":2},{"value":"Role, ClusterRole","url":"#role-clusterrole","depth":3},{"value":"Role Resource","url":"#role-resource","depth":4},{"value":"RoleBinding, ClusterRoleBinding","url":"#rolebinding-clusterrolebinding","depth":3},{"value":"RBAC 테스트","url":"#rbac-테스트","depth":4}],"frontMatter":{"readingTime":{"text":"12 min read","minutes":11.6,"time":696000,"words":2320},"slug":"k8s_manifest-RBAC","fileName":"k8s_manifest-RBAC.mdx","title":"K8S manifest - RBAC","date":"2023-06-02T01:03:00.000Z","lastmod":"2023-06-02","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"demian11k","avatar":"/static/images/avatar.png","email":"demian11k@gmail.com","github":"https://github.com/demian9k","date":null}],"prev":{"title":"K8S manifest - VolumeSnapshot","date":"2023-06-01T06:03:00.000Z","lastmod":"2023-06-01","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-VolumeSnapshot"},"next":{"title":"K8S manifest - ServiceAccount","date":"2023-06-02T02:03:00.000Z","lastmod":"2023-06-02","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-ServiceAccount"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["k8s_manifest-RBAC"]},"buildId":"ZrykKxtWiPyMXxUDniMmQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>