<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>K8S manifest - PodDisruptionBudgets</title><meta name="robots" content="follow, index"/><meta name="description" content=""/><meta property="og:url" content="https://demian9k.github.io/blog/k8s_manifest_PodDisruptionBudgets"/><meta property="og:type" content="article"/><meta property="og:site_name" content="demian11k studylog"/><meta property="og:description" content=""/><meta property="og:title" content="K8S manifest - PodDisruptionBudgets"/><meta property="og:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="K8S manifest - PodDisruptionBudgets"/><meta name="twitter:description" content=""/><meta name="twitter:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><link rel="canonical" href="https://demian9k.github.io/blog/k8s_manifest_PodDisruptionBudgets"/><meta property="article:published_time" content="2023-05-18T01:01:00.000Z"/><meta property="article:modified_time" content="2023-05-18T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://demian9k.github.io/blog/k8s_manifest_PodDisruptionBudgets"
  },
  "headline": "K8S manifest - PodDisruptionBudgets",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2023-05-18T01:01:00.000Z",
  "dateModified": "2023-05-18T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "demian11k"
  },
  "publisher": {
    "@type": "Organization",
    "name": "demian11k",
    "logo": {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/logo.png"
    }
  },
  "description": ""
}</script><meta name="next-head-count" content="21"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/9da9539fac7f1ee9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9da9539fac7f1ee9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-1667cddafac2eea3.js" defer=""></script><script src="/_next/static/chunks/main-bfc1a3b6dd286443.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e097d8b875e64e46.js" defer=""></script><script src="/_next/static/chunks/140-77b8ab5a870d524b.js" defer=""></script><script src="/_next/static/chunks/574-40cb695d6b511631.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-48fd063b43fdbe6a.js" defer=""></script><script src="/_next/static/R1cpZtUWE2mFLIblfb-kJ/_buildManifest.js" defer=""></script><script src="/_next/static/R1cpZtUWE2mFLIblfb-kJ/_ssgManifest.js" defer=""></script><script src="/_next/static/R1cpZtUWE2mFLIblfb-kJ/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="demian11k.studylog" href="/"><div class="flex items-center justify-between"><div class="mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="A" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full object-cover object-center md:h-36 lg:h-48" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="A" srcSet="/_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=48 1x, /_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=96 2x" src="/_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full object-cover object-center md:h-36 lg:h-48" loading="lazy"/></noscript></span></div><div class="hidden h-6 text-2xl font-semibold sm:block">demian11k.studylog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div><header><div class="space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700"><dl><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-05-18T01:01:00.000Z">May 18, 2023</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">K8S manifest - PodDisruptionBudgets</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0 " style="grid-template-rows:auto 1fr"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h3 id="is-a-pvc-created-for-every-pod-deployment"><a href="#is-a-pvc-created-for-every-pod-deployment" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Is a PVC created for every Pod deployment?</h3><p>In Kubernetes, a PersistentVolumeClaim (PVC) is typically created before a Pod is deployed, although it is not a strict requirement. The lifecycle of PVCs and Pods can be decoupled, allowing PVCs to exist independently and be claimed by Pods at a later time.</p><p>Here are a few scenarios regarding the creation and timing of PVCs and Pods:</p><p>Pre-provisioned PVC: In some cases, PVCs may be pre-provisioned by a cluster administrator or an infrastructure team. These PVCs are created beforehand and made available for users to claim when deploying Pods. The PVCs can be claimed by Pods during their deployment, and the Pod can start using the associated storage immediately.</p><p>Dynamic Provisioning: Kubernetes also supports dynamic provisioning of PVCs. When a Pod specification includes a PVC, and the cluster has a StorageClass configured to enable dynamic provisioning, the PVC is automatically created when the Pod is deployed. The dynamic provisioning process involves creating the PVC and binding it to an available PersistentVolume (PV) that matches the requested storage class, capacity, and access mode.</p><p>PVC Claiming an Existing PV: If a PersistentVolume already exists, a PVC can claim it directly by matching the required storage class, capacity, and access mode. In this case, the PVC is created before the Pod, and the Pod specifies the pre-existing PVC in its specification.</p><p>It&#x27;s important to note that the availability of a PVC for a Pod depends on various factors, such as the state of the PVC and the matching criteria defined in the Pod&#x27;s volume specification. Kubernetes ensures that the PVC is bound to a suitable PV before allowing the Pod to use it, providing the requested storage resources to the Pod when it is scheduled.</p><p>In summary, while PVCs are often created before Pods, they can also be created dynamically during Pod deployment or claim pre-existing PVs. The exact timing depends on the specific use case, configuration, and requirements of the application and the underlying storage infrastructure.</p><p>Pre-provisioned PVC: Real-world use case: In a large organization, the IT infrastructure team pre-provisions PVCs with specific storage capacity and access modes to meet the anticipated needs of different teams and applications. Each team or application can claim the pre-provisioned PVCs as needed when deploying their Pods. This approach ensures efficient resource utilization and allows teams to quickly access and utilize storage resources without going through the provisioning process for each Pod deployment.</p><p>Dynamic Provisioning: Real-world use case: In a cloud-native environment, an application experiences varying demands for storage resources as the workload scales up or down. Dynamic provisioning allows the application to request PVCs as needed when Pods are deployed. For example, an e-commerce application may dynamically provision PVCs to handle increased storage requirements during peak shopping seasons. Dynamic provisioning enables efficient resource allocation and eliminates the need for manual intervention, ensuring storage capacity scales with the application&#x27;s demands.</p><p>PVC Claiming an Existing PV: Real-world use case: In scenarios where specific storage resources are required, such as a dedicated storage array with specific performance characteristics or compliance requirements, administrators may provision PVs in advance. PVCs can then be created to claim these pre-existing PVs. This approach is suitable for applications that require access to a specific storage system or have stringent data management or compliance needs. The PVC claims the existing PV to provide the desired storage resources to the Pod without the need for additional provisioning.</p><p>Each of these PVC provisioning approaches caters to different scenarios and requirements. Pre-provisioned PVCs are suitable for situations where storage resources are known in advance and can be allocated ahead of time. Dynamic provisioning allows for on-demand creation of PVCs, ensuring efficient utilization of storage resources based on workload demands. PVC claiming an existing PV enables the use of dedicated or specialized storage systems that have already been provisioned in the environment.</p><h4 id="reason-why-replicaset-or-deployment-cant-define-poddisruptionbudgets-pdbs"><a href="#reason-why-replicaset-or-deployment-cant-define-poddisruptionbudgets-pdbs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Reason why ReplicaSet or Deployment can&#x27;t define PodDisruptionBudgets (PDBs):</h4><p>ReplicaSets and Deployments are higher-level resources in Kubernetes that manage the desired number of replicas of Pods. They focus on maintaining the desired replica count and managing the lifecycle of the Pods. However, they do not directly provide the ability to define PodDisruptionBudgets (PDBs). Here&#x27;s why:</p><ol><li><p>Granularity: ReplicaSets and Deployments manage multiple Pods collectively, ensuring the desired number of replicas are running at all times. They do not have the granular visibility into individual Pods required to define availability constraints on a per-Pod basis.</p></li><li><p>Homogeneity: ReplicaSets and Deployments are designed to manage identical replicas of Pods. They assume that all replicas are interchangeable and can be scaled up or down as a group. Defining availability constraints on individual Pods within a ReplicaSet or Deployment would go against this assumption of uniformity.</p></li><li><p>Scaling and Rolling Updates: ReplicaSets and Deployments handle scaling operations and rolling updates by creating and terminating Pods incrementally. During scaling or updates, the Pod count may temporarily go below the desired replica count. This can conflict with the constraints defined in a PodDisruptionBudget, as PDBs aim to maintain a minimum number of available Pods at all times.</p></li></ol><p>To address availability concerns at the Pod level, Kubernetes provides the StatefulSet resource. StatefulSets are designed for managing stateful applications and support the use of PodDisruptionBudgets. StatefulSets maintain a fixed identity for each Pod, allowing for ordered scaling and updates while ensuring availability constraints defined in PDBs are honored.</p><p>In summary, while ReplicaSets and Deployments are not equipped to define PodDisruptionBudgets, StatefulSets are a more suitable choice when availability constraints at the Pod level are required. StatefulSets provide the necessary features and guarantees to ensure high availability and orderly disruption management for stateful applications.</p><h4 id="explain-why-you-need-a-pdb-when-you-have-a-replicaset-or-deployment"><a href="#explain-why-you-need-a-pdb-when-you-have-a-replicaset-or-deployment" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Explain why you need a PDB when you have a replicaset or deployment</h4><p>PodDisruptionBudgets (PDBs) are necessary even when using ReplicaSets or Deployments because they provide an additional layer of control and availability management beyond what ReplicaSets or Deployments alone offer.</p><p>While ReplicaSets and Deployments ensure the desired number of replica Pods are running and handle scaling and rolling updates, they do not directly address the availability constraints during disruptions or maintenance activities. This is where PDBs come into play. PDBs define availability policies, specifying the minimum number of available Pods during voluntary or involuntary disruptions.</p><p>By using PDBs in conjunction with ReplicaSets or Deployments, you can ensure that the desired availability and fault tolerance requirements are met. PDBs allow you to set constraints on the number of Pods that can be simultaneously unavailable, providing safeguards against potential downtime or service interruptions. This ensures that a minimum number of Pods remain available to serve requests, even during maintenance operations or unexpected failures.</p><p>PDBs help to achieve a balanced approach between availability and necessary maintenance activities. They allow you to perform rolling updates or scale down operations while ensuring that a sufficient number of Pods are available to maintain the required level of service. This helps to prevent disruptions to the application or service, enabling smoother maintenance processes and improved overall reliability.</p><p>In summary, while ReplicaSets and Deployments handle scaling and rolling updates, PDBs add an additional layer of control by defining availability constraints during disruptions. Together, they provide a comprehensive approach to managing replicas, scaling, and maintaining availability, ensuring robust and uninterrupted operation of your applications in Kubernetes clusters.</p></div></div><div id="comment"></div><footer><div class="flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base"><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifest-DaemonSet">← <!-- -->K8S manifest - DaemonSet</a></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifests_examples_1-hello">K8S manifests examples 1 - hello<!-- --> →</a></div></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:demian11k@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/demian9k"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>demian11k</div><div> • </div><div>© 2023</div><div> • </div><a href="/">demian11k studylog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var l=Object.create;var s=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var o=i=\u003es(i,\"__esModule\",{value:!0});var m=(i,n)=\u003e()=\u003e(n||i((n={exports:{}}).exports,n),n.exports),g=(i,n)=\u003e{o(i);for(var t in n)s(i,t,{get:n[t],enumerable:!0})},y=(i,n,t)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let a of p(n))!u.call(i,a)\u0026\u0026a!==\"default\"\u0026\u0026s(i,a,{get:()=\u003en[a],enumerable:!(t=c(n,a))||t.enumerable});return i},f=i=\u003ey(o(s(i!=null?l(h(i)):{},\"default\",i\u0026\u0026i.__esModule\u0026\u0026\"default\"in i?{get:()=\u003ei.default,enumerable:!0}:{value:i,enumerable:!0})),i);var d=m((D,r)=\u003e{r.exports=_jsx_runtime});var w={};g(w,{default:()=\u003eb,frontmatter:()=\u003eP});var e=f(d()),P={title:\"K8S manifest - PodDisruptionBudgets\",date:new Date(168437166e4),lastmod:\"2023-05-18\",tags:[\"kubernetes\"],draft:!1,summary:\"\",layout:\"PostSimple\"};function v(i={}){let{wrapper:n}=i.components||{};return n?(0,e.jsx)(n,Object.assign({},i,{children:(0,e.jsx)(t,{})})):t();function t(){let a=Object.assign({h3:\"h3\",a:\"a\",span:\"span\",p:\"p\",h4:\"h4\",ol:\"ol\",li:\"li\"},i.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.h3,{id:\"is-a-pvc-created-for-every-pod-deployment\",children:[(0,e.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#is-a-pvc-created-for-every-pod-deployment\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Is a PVC created for every Pod deployment?\"]}),(0,e.jsx)(a.p,{children:\"In Kubernetes, a PersistentVolumeClaim (PVC) is typically created before a Pod is deployed, although it is not a strict requirement. The lifecycle of PVCs and Pods can be decoupled, allowing PVCs to exist independently and be claimed by Pods at a later time.\"}),(0,e.jsx)(a.p,{children:\"Here are a few scenarios regarding the creation and timing of PVCs and Pods:\"}),(0,e.jsx)(a.p,{children:\"Pre-provisioned PVC: In some cases, PVCs may be pre-provisioned by a cluster administrator or an infrastructure team. These PVCs are created beforehand and made available for users to claim when deploying Pods. The PVCs can be claimed by Pods during their deployment, and the Pod can start using the associated storage immediately.\"}),(0,e.jsx)(a.p,{children:\"Dynamic Provisioning: Kubernetes also supports dynamic provisioning of PVCs. When a Pod specification includes a PVC, and the cluster has a StorageClass configured to enable dynamic provisioning, the PVC is automatically created when the Pod is deployed. The dynamic provisioning process involves creating the PVC and binding it to an available PersistentVolume (PV) that matches the requested storage class, capacity, and access mode.\"}),(0,e.jsx)(a.p,{children:\"PVC Claiming an Existing PV: If a PersistentVolume already exists, a PVC can claim it directly by matching the required storage class, capacity, and access mode. In this case, the PVC is created before the Pod, and the Pod specifies the pre-existing PVC in its specification.\"}),(0,e.jsx)(a.p,{children:\"It's important to note that the availability of a PVC for a Pod depends on various factors, such as the state of the PVC and the matching criteria defined in the Pod's volume specification. Kubernetes ensures that the PVC is bound to a suitable PV before allowing the Pod to use it, providing the requested storage resources to the Pod when it is scheduled.\"}),(0,e.jsx)(a.p,{children:\"In summary, while PVCs are often created before Pods, they can also be created dynamically during Pod deployment or claim pre-existing PVs. The exact timing depends on the specific use case, configuration, and requirements of the application and the underlying storage infrastructure.\"}),(0,e.jsx)(a.p,{children:\"Pre-provisioned PVC: Real-world use case: In a large organization, the IT infrastructure team pre-provisions PVCs with specific storage capacity and access modes to meet the anticipated needs of different teams and applications. Each team or application can claim the pre-provisioned PVCs as needed when deploying their Pods. This approach ensures efficient resource utilization and allows teams to quickly access and utilize storage resources without going through the provisioning process for each Pod deployment.\"}),(0,e.jsx)(a.p,{children:\"Dynamic Provisioning: Real-world use case: In a cloud-native environment, an application experiences varying demands for storage resources as the workload scales up or down. Dynamic provisioning allows the application to request PVCs as needed when Pods are deployed. For example, an e-commerce application may dynamically provision PVCs to handle increased storage requirements during peak shopping seasons. Dynamic provisioning enables efficient resource allocation and eliminates the need for manual intervention, ensuring storage capacity scales with the application's demands.\"}),(0,e.jsx)(a.p,{children:\"PVC Claiming an Existing PV: Real-world use case: In scenarios where specific storage resources are required, such as a dedicated storage array with specific performance characteristics or compliance requirements, administrators may provision PVs in advance. PVCs can then be created to claim these pre-existing PVs. This approach is suitable for applications that require access to a specific storage system or have stringent data management or compliance needs. The PVC claims the existing PV to provide the desired storage resources to the Pod without the need for additional provisioning.\"}),(0,e.jsx)(a.p,{children:\"Each of these PVC provisioning approaches caters to different scenarios and requirements. Pre-provisioned PVCs are suitable for situations where storage resources are known in advance and can be allocated ahead of time. Dynamic provisioning allows for on-demand creation of PVCs, ensuring efficient utilization of storage resources based on workload demands. PVC claiming an existing PV enables the use of dedicated or specialized storage systems that have already been provisioned in the environment.\"}),(0,e.jsxs)(a.h4,{id:\"reason-why-replicaset-or-deployment-cant-define-poddisruptionbudgets-pdbs\",children:[(0,e.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#reason-why-replicaset-or-deployment-cant-define-poddisruptionbudgets-pdbs\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Reason why ReplicaSet or Deployment can't define PodDisruptionBudgets (PDBs):\"]}),(0,e.jsx)(a.p,{children:\"ReplicaSets and Deployments are higher-level resources in Kubernetes that manage the desired number of replicas of Pods. They focus on maintaining the desired replica count and managing the lifecycle of the Pods. However, they do not directly provide the ability to define PodDisruptionBudgets (PDBs). Here's why:\"}),(0,e.jsxs)(a.ol,{children:[(0,e.jsx)(a.li,{children:(0,e.jsx)(a.p,{children:\"Granularity: ReplicaSets and Deployments manage multiple Pods collectively, ensuring the desired number of replicas are running at all times. They do not have the granular visibility into individual Pods required to define availability constraints on a per-Pod basis.\"})}),(0,e.jsx)(a.li,{children:(0,e.jsx)(a.p,{children:\"Homogeneity: ReplicaSets and Deployments are designed to manage identical replicas of Pods. They assume that all replicas are interchangeable and can be scaled up or down as a group. Defining availability constraints on individual Pods within a ReplicaSet or Deployment would go against this assumption of uniformity.\"})}),(0,e.jsx)(a.li,{children:(0,e.jsx)(a.p,{children:\"Scaling and Rolling Updates: ReplicaSets and Deployments handle scaling operations and rolling updates by creating and terminating Pods incrementally. During scaling or updates, the Pod count may temporarily go below the desired replica count. This can conflict with the constraints defined in a PodDisruptionBudget, as PDBs aim to maintain a minimum number of available Pods at all times.\"})})]}),(0,e.jsx)(a.p,{children:\"To address availability concerns at the Pod level, Kubernetes provides the StatefulSet resource. StatefulSets are designed for managing stateful applications and support the use of PodDisruptionBudgets. StatefulSets maintain a fixed identity for each Pod, allowing for ordered scaling and updates while ensuring availability constraints defined in PDBs are honored.\"}),(0,e.jsx)(a.p,{children:\"In summary, while ReplicaSets and Deployments are not equipped to define PodDisruptionBudgets, StatefulSets are a more suitable choice when availability constraints at the Pod level are required. StatefulSets provide the necessary features and guarantees to ensure high availability and orderly disruption management for stateful applications.\"}),(0,e.jsxs)(a.h4,{id:\"explain-why-you-need-a-pdb-when-you-have-a-replicaset-or-deployment\",children:[(0,e.jsx)(a.a,{\"aria-hidden\":\"true\",href:\"#explain-why-you-need-a-pdb-when-you-have-a-replicaset-or-deployment\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Explain why you need a PDB when you have a replicaset or deployment\"]}),(0,e.jsx)(a.p,{children:\"PodDisruptionBudgets (PDBs) are necessary even when using ReplicaSets or Deployments because they provide an additional layer of control and availability management beyond what ReplicaSets or Deployments alone offer.\"}),(0,e.jsx)(a.p,{children:\"While ReplicaSets and Deployments ensure the desired number of replica Pods are running and handle scaling and rolling updates, they do not directly address the availability constraints during disruptions or maintenance activities. This is where PDBs come into play. PDBs define availability policies, specifying the minimum number of available Pods during voluntary or involuntary disruptions.\"}),(0,e.jsx)(a.p,{children:\"By using PDBs in conjunction with ReplicaSets or Deployments, you can ensure that the desired availability and fault tolerance requirements are met. PDBs allow you to set constraints on the number of Pods that can be simultaneously unavailable, providing safeguards against potential downtime or service interruptions. This ensures that a minimum number of Pods remain available to serve requests, even during maintenance operations or unexpected failures.\"}),(0,e.jsx)(a.p,{children:\"PDBs help to achieve a balanced approach between availability and necessary maintenance activities. They allow you to perform rolling updates or scale down operations while ensuring that a sufficient number of Pods are available to maintain the required level of service. This helps to prevent disruptions to the application or service, enabling smoother maintenance processes and improved overall reliability.\"}),(0,e.jsx)(a.p,{children:\"In summary, while ReplicaSets and Deployments handle scaling and rolling updates, PDBs add an additional layer of control by defining availability constraints during disruptions. Together, they provide a comprehensive approach to managing replicas, scaling, and maintaining availability, ensuring robust and uninterrupted operation of your applications in Kubernetes clusters.\"})]})}}var b=v;return w;})();\n;return Component;","toc":[{"value":"Is a PVC created for every Pod deployment?","url":"#is-a-pvc-created-for-every-pod-deployment","depth":3},{"value":"Reason why ReplicaSet or Deployment can't define PodDisruptionBudgets (PDBs):","url":"#reason-why-replicaset-or-deployment-cant-define-poddisruptionbudgets-pdbs","depth":4},{"value":"Explain why you need a PDB when you have a replicaset or deployment","url":"#explain-why-you-need-a-pdb-when-you-have-a-replicaset-or-deployment","depth":4}],"frontMatter":{"readingTime":{"text":"7 min read","minutes":6.075,"time":364500,"words":1215},"slug":"k8s_manifest_PodDisruptionBudgets","fileName":"k8s_manifest_PodDisruptionBudgets.mdx","title":"K8S manifest - PodDisruptionBudgets","date":"2023-05-18T01:01:00.000Z","lastmod":"2023-05-18","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"demian11k","avatar":"/static/images/avatar.png","email":"demian11k@gmail.com","github":"https://github.com/demian9k","date":null}],"prev":{"title":"K8S manifest - DaemonSet","date":"2023-05-16T04:03:00.000Z","lastmod":"2023-05-16","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-DaemonSet"},"next":{"title":"K8S manifests examples 1 - hello","date":"2023-05-22T01:01:00.000Z","lastmod":"2023-05-22","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifests_examples_1-hello"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["k8s_manifest_PodDisruptionBudgets"]},"buildId":"R1cpZtUWE2mFLIblfb-kJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>