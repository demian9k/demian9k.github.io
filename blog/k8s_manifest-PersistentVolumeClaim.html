<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>K8S manifest - PersistentVolumeClaim</title><meta name="robots" content="follow, index"/><meta name="description" content=""/><meta property="og:url" content="https://demian9k.github.io/blog/k8s_manifest-PersistentVolumeClaim"/><meta property="og:type" content="article"/><meta property="og:site_name" content="demian11k"/><meta property="og:description" content=""/><meta property="og:title" content="K8S manifest - PersistentVolumeClaim"/><meta property="og:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="K8S manifest - PersistentVolumeClaim"/><meta name="twitter:description" content=""/><meta name="twitter:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><link rel="canonical" href="https://demian9k.github.io/blog/k8s_manifest-PersistentVolumeClaim"/><meta property="article:published_time" content="2023-06-01T05:03:00.000Z"/><meta property="article:modified_time" content="2023-06-01T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://demian9k.github.io/blog/k8s_manifest-PersistentVolumeClaim"
  },
  "headline": "K8S manifest - PersistentVolumeClaim",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2023-06-01T05:03:00.000Z",
  "dateModified": "2023-06-01T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "demian11k"
  },
  "publisher": {
    "@type": "Organization",
    "name": "demian11k",
    "logo": {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/logo.png"
    }
  },
  "description": ""
}</script><meta name="next-head-count" content="21"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/94ea37d977b78d30.css" as="style"/><link rel="stylesheet" href="/_next/static/css/94ea37d977b78d30.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-781a92acf59ed6b5.js" defer=""></script><script src="/_next/static/chunks/main-bfc1a3b6dd286443.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e22266d47111418b.js" defer=""></script><script src="/_next/static/chunks/140-77b8ab5a870d524b.js" defer=""></script><script src="/_next/static/chunks/574-40cb695d6b511631.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-48fd063b43fdbe6a.js" defer=""></script><script src="/_next/static/otfPwKwSsy3CYkkcjSJd6/_buildManifest.js" defer=""></script><script src="/_next/static/otfPwKwSsy3CYkkcjSJd6/_ssgManifest.js" defer=""></script><script src="/_next/static/otfPwKwSsy3CYkkcjSJd6/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="demian11k" href="/"><div class="flex items-center justify-between"><div class="mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="A" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full object-cover object-center md:h-36 lg:h-48" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="A" srcSet="/_next/static/media/demian_avatar_logo.73bd1e6e.png?imwidth=48 1x, /_next/static/media/demian_avatar_logo.73bd1e6e.png?imwidth=96 2x" src="/_next/static/media/demian_avatar_logo.73bd1e6e.png?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full object-cover object-center md:h-36 lg:h-48" loading="lazy"/></noscript></span></div><div class="hidden h-6 text-2xl font-semibold leading-4 sm:block">demian11k</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div><header><div class="space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700"><dl><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-06-01T05:03:00.000Z">June 1, 2023</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">K8S manifest - PersistentVolumeClaim</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0 " style="grid-template-rows:auto 1fr"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="persistentvolumeclaim"><a href="#persistentvolumeclaim" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>PersistentVolumeClaim</h2><p>PVC는 Pod에 의해 PV를 요청(claim) 하는 리소스다.</p><p>Pod에서 PVC를 사용하려면 먼저 선수조건이 구성되어야 한다.</p><ol><li>PV 혹은 StorageClass가</li></ol><p>Pod의 spec.volumes[].persistentVolumeClaim.claimName 값에 미리 선언된 pvc.metadata.name을 매핑한다.</p><p>PVC에서 지정된 조건(capacity, label)이 apply 되면, scheduler는 현재 PV들에서 적당한 PV를 매칭하여 bound 한다.</p><p>PVC는 PV와 매칭되지 않으면 Pending 상태가 유지된다.</p><h4 id="pod에서-사용"><a href="#pod에서-사용" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Pod에서 사용</h4><p>아래 Pod는 claimName을 지정하여 PV를 찾는다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>pod
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.12</span>
</span><span class="code-line">      <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</span><span class="code-line">          <span class="token atrule key">name</span><span class="token punctuation">:</span> <span class="token string">&#x27;http&#x27;</span>
</span><span class="code-line">      <span class="token atrule key">volumeMounts</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">mountPath</span><span class="token punctuation">:</span> <span class="token string">&#x27;/usr/share/nginx/html&#x27;</span>
</span><span class="code-line">          <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">  <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">      <span class="token atrule key">persistentVolumeClaim</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">claimName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc
</span></code></pre></div><h3 id="동적-프로비저닝"><a href="#동적-프로비저닝" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>동적 프로비저닝</h3><p>정적 프로비저닝이라고 불리는 일반적인 PV 할당 절차는 PV를 먼저 만들고 PVC에 따라 PV를 할당하는 순서로 진행되었다. 그래서 사전에 PV를 생성해야 하는 번거로움과 PVC가 요청하는 capa 이상으로 PV가 할당되어 낭비가 발생하는 문제가 있었다.</p><p>동적 프로비저닝은 이 문제를 해결한다. 동적 프로비저닝을 사용한 PVC의 경우 PVC가 생성될 때 동적으로 PV를 생성,할당한다. 그래서 사전에 PV를 생성할 필요가 없고 용량 낭비가 발생하지 않는다.</p><ol><li>동적 프로비저닝을 위해 StorageClass를 선언한다.</li></ol><p>Storage 클래스는 PVC로 PV를 생성하기 위해 원하는 스토리지의 클래스(등급)을 설명하는 방법을 제공한다.</p><p>기본적으로 3가지의 값이 필수적으로 명시되어야 한다.</p><ol><li>provisioner 어떤 볼륨 플러그인이 PV를 provisioning 할 때 사용될 지를 결정한다.(필수값)</li></ol><p>다양한 종류의 provisioner가 존재한다.</p><ul><li>AWS-EBS: kubernetes.io/aws-ebs</li><li>Azure-File: kubernetes.io/azure-file</li><li>nfs: example.com/external-nfs</li><li>cephrbd: kubernetes.io/rbd</li></ul><ol><li>parameters</li></ol><ul><li>원하는 디스크의 종류를 지정하는 데 사용된다.</li><li>provisioner가 제공할 수 있는 PV중 어떤 종류의 디스크를 사용할지를 결정한다.</li></ul><ol start="2"><li>reclaimPolicy</li></ol><p>아래 manifest는 gce의 persistent disk를 할당하기 위한 내용으로, parameters에 지정된 pd-ssd는 gce Persistence Disk 서비스에서 제공하는 유형 중 하나로 성능(SSD) 영구 디스크(pd-ssd)이다. 다른 종류로 pd-standard, pd-balanced, pd-extreme를 지정할 수 있다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> StorageClass
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>storageclass
</span><span class="code-line"><span class="token atrule key">parameters</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">type</span><span class="token punctuation">:</span> pd<span class="token punctuation">-</span>ssd
</span><span class="code-line"><span class="token atrule key">provisioner</span><span class="token punctuation">:</span> kubernetes.io/gce<span class="token punctuation">-</span>pd
</span><span class="code-line"><span class="token atrule key">reclaimPolicy</span><span class="token punctuation">:</span> Delete
</span></code></pre></div><ol><li>PVC를 작성할때 spec.storageClassName에 먼저 선언한 StorageClass.metadata.name을 매핑해주고 apply한다.</li></ol><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>dynamic
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">storageClassName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>storageclass
</span><span class="code-line">  <span class="token atrule key">accessModes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> ReadWriteOnce
</span><span class="code-line">  <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">requests</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">storage</span><span class="token punctuation">:</span> 3Gi
</span></code></pre></div><ol start="3"><li>Pod 선언시 PVC를 매핑하여 apply 한다.</li></ol><p>이 Pod는 volumes[].persistentVolumeClaim.claimName 에 이전에 선언된 PVC의 metadata.name을 매핑한다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>dynamic<span class="token punctuation">-</span>pod
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.16</span>
</span><span class="code-line">      <span class="token atrule key">volumeMounts</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">mountPath</span><span class="token punctuation">:</span> <span class="token string">&#x27;/usr/share/nginx/html&#x27;</span>
</span><span class="code-line">          <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">  <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">      <span class="token atrule key">persistentVolumeClaim</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">claimName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>dynamic
</span></code></pre></div><h4 id="pvc-할당-타이밍-제어"><a href="#pvc-할당-타이밍-제어" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>PVC 할당 타이밍 제어</h4><p>동적 프로비저닝을 사용할 때 PVC를 생성하면 PV가 즉시 생성되는 것이 기본값이다. 그러나 이 동작은 Pod또한 PVC를 즉시 사용하지 않는다면 낭비가 발생되는 정책이다.</p><p>그래서 Storage 클래스의 volumeBindingMode라는 속성에 WaitForFirstConsumer를 지정하면 실제 Pod에 Attach 되기 전에 PV가 생성되도록 바꿀 수 있게 된다. 생략했을 때의 기본 값은 Immediate 이다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> StorageClass
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>storageclass<span class="token punctuation">-</span>wait
</span><span class="code-line"><span class="token atrule key">parameters</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">type</span><span class="token punctuation">:</span> pd<span class="token punctuation">-</span>ssd
</span><span class="code-line"><span class="token atrule key">provisioner</span><span class="token punctuation">:</span> kubernetes.io/gce<span class="token punctuation">-</span>pd
</span><span class="code-line"><span class="token atrule key">reclaimPolicy</span><span class="token punctuation">:</span> Delete
</span><span class="code-line"><span class="token atrule key">volumeBindingMode</span><span class="token punctuation">:</span> WaitForFirstConsumer
</span></code></pre></div><h4 id="pv를-block-device로-사용"><a href="#pv를-block-device로-사용" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>PV를 Block Device로 사용</h4><p>PV를 파일 시스템으로 attach 하지 않고 Block Device로 attach 하는 방법도 존재한다. Block Storage를 직접 처리해 성능이 향상될 수 있는 미들웨어 같은 경우는 이 방법을 사용하는 것이 권장된다.</p><p>PV를 Block Device로 생성하려면 spec.volumeMode를 Block으로 지정한다. 기본값은 Filesystem 이다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>block
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">storageClassName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>storageclass
</span><span class="code-line">  <span class="token atrule key">volumeMode</span><span class="token punctuation">:</span> Block
</span><span class="code-line">  <span class="token atrule key">accessModes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> ReadWriteOnce
</span><span class="code-line">  <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">requests</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">storage</span><span class="token punctuation">:</span> 3Gi
</span></code></pre></div><p>Block Device의 PVC를 사용할 때는 Pod 에서 볼륨을 지정할 때 spec.containers.volumeMounts 대신 spec.containers.volumeDevices를 사용한다. volumeMounts를 사용하면, 등록이 되지만, 컨테이너는 동작하지 않는다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>block<span class="token punctuation">-</span>pod
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.16</span>
</span><span class="code-line">      <span class="token atrule key">volumeDevices</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">devicePath</span><span class="token punctuation">:</span> /dev/sample<span class="token punctuation">-</span>block
</span><span class="code-line">          <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">  <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">      <span class="token atrule key">persistentVolumeClaim</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">claimName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>block
</span></code></pre></div><h4 id="pvc-volume-expansion"><a href="#pvc-volume-expansion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>PVC volume expansion</h4><p>동적 프로비저닝을 할 때 크기가 조절 기능이 지원되는 볼륨 플러그인이 있다.</p><ul><li>gcePersistenceDisk</li><li>awsElasticBlockStore</li><li>OpenStack Cinder</li><li>glusterfs</li><li>RDB(Rados Block Device)</li></ul><ol><li>StorageClass에서 allowVolumeExpansion를 true로 설정한다.</li></ol><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> StorageClass
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>storageclass<span class="token punctuation">-</span>resize
</span><span class="code-line"><span class="token atrule key">parameters</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">type</span><span class="token punctuation">:</span> pd<span class="token punctuation">-</span>ssd
</span><span class="code-line"><span class="token atrule key">provisioner</span><span class="token punctuation">:</span> kubernetes.io/gce<span class="token punctuation">-</span>pd
</span><span class="code-line"><span class="token atrule key">reclaimPolicy</span><span class="token punctuation">:</span> Delete
</span><span class="code-line"><span class="token atrule key">allowVolumeExpansion</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</span></code></pre></div><ol start="2"><li>PVC에서는 storageClassName을 매핑한다. 사용하지 않을 때와 비교해 특정한 설정은 없다.</li></ol><p>StorageClass의 volumeBindingMode 모드는 생략하여 Immediate 이므로 PV가 생성된다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>resize
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">accessModes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> ReadWriteOnce
</span><span class="code-line">  <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">requests</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">storage</span><span class="token punctuation">:</span> 8G
</span><span class="code-line">  <span class="token atrule key">storageClassName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>storageclass<span class="token punctuation">-</span>resize
</span></code></pre></div><ol><li>pvc를 사용하는 pod를 apply 한다.</li></ol><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>resize<span class="token punctuation">-</span>pod
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.12</span>
</span><span class="code-line">      <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</span><span class="code-line">          <span class="token atrule key">name</span><span class="token punctuation">:</span> <span class="token string">&#x27;http&#x27;</span>
</span><span class="code-line">      <span class="token atrule key">volumeMounts</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">mountPath</span><span class="token punctuation">:</span> <span class="token string">&#x27;/usr/share/nginx/html&#x27;</span>
</span><span class="code-line">          <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">  <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>pvc
</span><span class="code-line">      <span class="token atrule key">persistentVolumeClaim</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">claimName</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pvc<span class="token punctuation">-</span>resize
</span></code></pre></div><p>Pod에서 Bound 된 PV확인 (PVC를 생성했을 때와 동일하다)</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">kubectl <span class="token builtin class-name">exec</span> -it sample-pvc-resize-pod -- <span class="token function">df</span> -h <span class="token operator">|</span> <span class="token function">grep</span> /usr/share/nginx/html
</span></code></pre></div><p>pvc를 patch 하여 capa를 확장한다.(축소는 불가능하다.)</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">kubectl patch pvc sample-pvc-resize --path <span class="token string">&#x27;{&quot;spec&quot;: {&quot;resources&quot;: {&quot;requests&quot;:{&quot;storage: &quot;16Gi&quot;}}}}&#x27;</span>
</span></code></pre></div><p>다시 Pod에서 PV확인 하면 증가되어 있다.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">kubectl <span class="token builtin class-name">exec</span> -it sample-pvc-resize-pod -- <span class="token function">df</span> -h <span class="token operator">|</span> <span class="token function">grep</span> /usr/share/nginx/html
</span></code></pre></div></div></div><div id="comment"></div><footer><div class="flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base"><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifest-PersistentVolume">← <!-- -->K8S manifest - PersistentVolume</a></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifest-VolumeSnapshot">K8S manifest - VolumeSnapshot<!-- --> →</a></div></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:demian11k@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/demian9k"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>demian11k</div><div> • </div><div>© 2023</div><div> • </div><a href="/">demian11k</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var i=a=\u003el(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of d(s))!h.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=p(s,n))||c.enumerable});return a},y=a=\u003ek(i(l(a!=null?r(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((x,t)=\u003e{t.exports=_jsx_runtime});var V={};N(V,{default:()=\u003eP,frontmatter:()=\u003eg});var e=y(o()),g={title:\"K8S manifest - PersistentVolumeClaim\",date:new Date(168559578e4),lastmod:\"2023-06-01\",tags:[\"kubernetes\"],draft:!1,summary:\"\",layout:\"PostSimple\"};function v(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ol:\"ol\",li:\"li\",h4:\"h4\",pre:\"pre\",code:\"code\",h3:\"h3\",ul:\"ul\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"persistentvolumeclaim\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#persistentvolumeclaim\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"PersistentVolumeClaim\"]}),(0,e.jsx)(n.p,{children:\"PVC\\uB294 Pod\\uC5D0 \\uC758\\uD574 PV\\uB97C \\uC694\\uCCAD(claim) \\uD558\\uB294 \\uB9AC\\uC18C\\uC2A4\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"Pod\\uC5D0\\uC11C PVC\\uB97C \\uC0AC\\uC6A9\\uD558\\uB824\\uBA74 \\uBA3C\\uC800 \\uC120\\uC218\\uC870\\uAC74\\uC774 \\uAD6C\\uC131\\uB418\\uC5B4\\uC57C \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"PV \\uD639\\uC740 StorageClass\\uAC00\"})}),(0,e.jsx)(n.p,{children:\"Pod\\uC758 spec.volumes[].persistentVolumeClaim.claimName \\uAC12\\uC5D0 \\uBBF8\\uB9AC \\uC120\\uC5B8\\uB41C pvc.metadata.name\\uC744 \\uB9E4\\uD551\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"PVC\\uC5D0\\uC11C \\uC9C0\\uC815\\uB41C \\uC870\\uAC74(capacity, label)\\uC774 apply \\uB418\\uBA74, scheduler\\uB294 \\uD604\\uC7AC PV\\uB4E4\\uC5D0\\uC11C \\uC801\\uB2F9\\uD55C PV\\uB97C \\uB9E4\\uCE6D\\uD558\\uC5EC bound \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"PVC\\uB294 PV\\uC640 \\uB9E4\\uCE6D\\uB418\\uC9C0 \\uC54A\\uC73C\\uBA74 Pending \\uC0C1\\uD0DC\\uAC00 \\uC720\\uC9C0\\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.h4,{id:\"pod\\uC5D0\\uC11C-\\uC0AC\\uC6A9\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#pod\\uC5D0\\uC11C-\\uC0AC\\uC6A9\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Pod\\uC5D0\\uC11C \\uC0AC\\uC6A9\"]}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798 Pod\\uB294 claimName\\uC744 \\uC9C0\\uC815\\uD558\\uC5EC PV\\uB97C \\uCC3E\\uB294\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.12\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'http'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/usr/share/nginx/html'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaim\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"claimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uB3D9\\uC801-\\uD504\\uB85C\\uBE44\\uC800\\uB2DD\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\uB3D9\\uC801-\\uD504\\uB85C\\uBE44\\uC800\\uB2DD\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uB3D9\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\"]}),(0,e.jsx)(n.p,{children:\"\\uC815\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\\uC774\\uB77C\\uACE0 \\uBD88\\uB9AC\\uB294 \\uC77C\\uBC18\\uC801\\uC778 PV \\uD560\\uB2F9 \\uC808\\uCC28\\uB294 PV\\uB97C \\uBA3C\\uC800 \\uB9CC\\uB4E4\\uACE0 PVC\\uC5D0 \\uB530\\uB77C PV\\uB97C \\uD560\\uB2F9\\uD558\\uB294 \\uC21C\\uC11C\\uB85C \\uC9C4\\uD589\\uB418\\uC5C8\\uB2E4. \\uADF8\\uB798\\uC11C \\uC0AC\\uC804\\uC5D0 PV\\uB97C \\uC0DD\\uC131\\uD574\\uC57C \\uD558\\uB294 \\uBC88\\uAC70\\uB85C\\uC6C0\\uACFC PVC\\uAC00 \\uC694\\uCCAD\\uD558\\uB294 capa \\uC774\\uC0C1\\uC73C\\uB85C PV\\uAC00 \\uD560\\uB2F9\\uB418\\uC5B4 \\uB0AD\\uBE44\\uAC00 \\uBC1C\\uC0DD\\uD558\\uB294 \\uBB38\\uC81C\\uAC00 \\uC788\\uC5C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uB3D9\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\\uC740 \\uC774 \\uBB38\\uC81C\\uB97C \\uD574\\uACB0\\uD55C\\uB2E4. \\uB3D9\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\\uC744 \\uC0AC\\uC6A9\\uD55C PVC\\uC758 \\uACBD\\uC6B0 PVC\\uAC00 \\uC0DD\\uC131\\uB420 \\uB54C \\uB3D9\\uC801\\uC73C\\uB85C PV\\uB97C \\uC0DD\\uC131,\\uD560\\uB2F9\\uD55C\\uB2E4. \\uADF8\\uB798\\uC11C \\uC0AC\\uC804\\uC5D0 PV\\uB97C \\uC0DD\\uC131\\uD560 \\uD544\\uC694\\uAC00 \\uC5C6\\uACE0 \\uC6A9\\uB7C9 \\uB0AD\\uBE44\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4.\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"\\uB3D9\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\\uC744 \\uC704\\uD574 StorageClass\\uB97C \\uC120\\uC5B8\\uD55C\\uB2E4.\"})}),(0,e.jsx)(n.p,{children:\"Storage \\uD074\\uB798\\uC2A4\\uB294 PVC\\uB85C PV\\uB97C \\uC0DD\\uC131\\uD558\\uAE30 \\uC704\\uD574 \\uC6D0\\uD558\\uB294 \\uC2A4\\uD1A0\\uB9AC\\uC9C0\\uC758 \\uD074\\uB798\\uC2A4(\\uB4F1\\uAE09)\\uC744 \\uC124\\uBA85\\uD558\\uB294 \\uBC29\\uBC95\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C 3\\uAC00\\uC9C0\\uC758 \\uAC12\\uC774 \\uD544\\uC218\\uC801\\uC73C\\uB85C \\uBA85\\uC2DC\\uB418\\uC5B4\\uC57C \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"provisioner \\uC5B4\\uB5A4 \\uBCFC\\uB968 \\uD50C\\uB7EC\\uADF8\\uC778\\uC774 PV\\uB97C provisioning \\uD560 \\uB54C \\uC0AC\\uC6A9\\uB420 \\uC9C0\\uB97C \\uACB0\\uC815\\uD55C\\uB2E4.(\\uD544\\uC218\\uAC12)\"})}),(0,e.jsx)(n.p,{children:\"\\uB2E4\\uC591\\uD55C \\uC885\\uB958\\uC758 provisioner\\uAC00 \\uC874\\uC7AC\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"AWS-EBS: kubernetes.io/aws-ebs\"}),(0,e.jsx)(n.li,{children:\"Azure-File: kubernetes.io/azure-file\"}),(0,e.jsx)(n.li,{children:\"nfs: example.com/external-nfs\"}),(0,e.jsx)(n.li,{children:\"cephrbd: kubernetes.io/rbd\"})]}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"parameters\"})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uC6D0\\uD558\\uB294 \\uB514\\uC2A4\\uD06C\\uC758 \\uC885\\uB958\\uB97C \\uC9C0\\uC815\\uD558\\uB294 \\uB370 \\uC0AC\\uC6A9\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"provisioner\\uAC00 \\uC81C\\uACF5\\uD560 \\uC218 \\uC788\\uB294 PV\\uC911 \\uC5B4\\uB5A4 \\uC885\\uB958\\uC758 \\uB514\\uC2A4\\uD06C\\uB97C \\uC0AC\\uC6A9\\uD560\\uC9C0\\uB97C \\uACB0\\uC815\\uD55C\\uB2E4.\"})]}),(0,e.jsx)(n.ol,{start:\"2\",children:(0,e.jsx)(n.li,{children:\"reclaimPolicy\"})}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798 manifest\\uB294 gce\\uC758 persistent disk\\uB97C \\uD560\\uB2F9\\uD558\\uAE30 \\uC704\\uD55C \\uB0B4\\uC6A9\\uC73C\\uB85C, parameters\\uC5D0 \\uC9C0\\uC815\\uB41C pd-ssd\\uB294 gce Persistence Disk \\uC11C\\uBE44\\uC2A4\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 \\uC720\\uD615 \\uC911 \\uD558\\uB098\\uB85C \\uC131\\uB2A5(SSD) \\uC601\\uAD6C \\uB514\\uC2A4\\uD06C(pd-ssd)\\uC774\\uB2E4. \\uB2E4\\uB978 \\uC885\\uB958\\uB85C pd-standard, pd-balanced, pd-extreme\\uB97C \\uC9C0\\uC815\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`storageclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" pd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`ssd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kubernetes.io/gce\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Delete\n`]})]})}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"PVC\\uB97C \\uC791\\uC131\\uD560\\uB54C spec.storageClassName\\uC5D0 \\uBA3C\\uC800 \\uC120\\uC5B8\\uD55C StorageClass.metadata.name\\uC744 \\uB9E4\\uD551\\uD574\\uC8FC\\uACE0 apply\\uD55C\\uB2E4.\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`dynamic\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`storageclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3Gi\n`]})]})}),(0,e.jsx)(n.ol,{start:\"3\",children:(0,e.jsx)(n.li,{children:\"Pod \\uC120\\uC5B8\\uC2DC PVC\\uB97C \\uB9E4\\uD551\\uD558\\uC5EC apply \\uD55C\\uB2E4.\"})}),(0,e.jsx)(n.p,{children:\"\\uC774 Pod\\uB294 volumes[].persistentVolumeClaim.claimName \\uC5D0 \\uC774\\uC804\\uC5D0 \\uC120\\uC5B8\\uB41C PVC\\uC758 metadata.name\\uC744 \\uB9E4\\uD551\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"dynamic\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/usr/share/nginx/html'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaim\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"claimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`dynamic\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"pvc-\\uD560\\uB2F9-\\uD0C0\\uC774\\uBC0D-\\uC81C\\uC5B4\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#pvc-\\uD560\\uB2F9-\\uD0C0\\uC774\\uBC0D-\\uC81C\\uC5B4\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"PVC \\uD560\\uB2F9 \\uD0C0\\uC774\\uBC0D \\uC81C\\uC5B4\"]}),(0,e.jsx)(n.p,{children:\"\\uB3D9\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\\uC744 \\uC0AC\\uC6A9\\uD560 \\uB54C PVC\\uB97C \\uC0DD\\uC131\\uD558\\uBA74 PV\\uAC00 \\uC989\\uC2DC \\uC0DD\\uC131\\uB418\\uB294 \\uAC83\\uC774 \\uAE30\\uBCF8\\uAC12\\uC774\\uB2E4. \\uADF8\\uB7EC\\uB098 \\uC774 \\uB3D9\\uC791\\uC740 Pod\\uB610\\uD55C PVC\\uB97C \\uC989\\uC2DC \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4\\uBA74 \\uB0AD\\uBE44\\uAC00 \\uBC1C\\uC0DD\\uB418\\uB294 \\uC815\\uCC45\\uC774\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uADF8\\uB798\\uC11C Storage \\uD074\\uB798\\uC2A4\\uC758 volumeBindingMode\\uB77C\\uB294 \\uC18D\\uC131\\uC5D0 WaitForFirstConsumer\\uB97C \\uC9C0\\uC815\\uD558\\uBA74 \\uC2E4\\uC81C Pod\\uC5D0 Attach \\uB418\\uAE30 \\uC804\\uC5D0 PV\\uAC00 \\uC0DD\\uC131\\uB418\\uB3C4\\uB85D \\uBC14\\uAFC0 \\uC218 \\uC788\\uAC8C \\uB41C\\uB2E4. \\uC0DD\\uB7B5\\uD588\\uC744 \\uB54C\\uC758 \\uAE30\\uBCF8 \\uAC12\\uC740 Immediate \\uC774\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"storageclass\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`wait\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" pd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`ssd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kubernetes.io/gce\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Delete\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeBindingMode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` WaitForFirstConsumer\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"pv\\uB97C-block-device\\uB85C-\\uC0AC\\uC6A9\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#pv\\uB97C-block-device\\uB85C-\\uC0AC\\uC6A9\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"PV\\uB97C Block Device\\uB85C \\uC0AC\\uC6A9\"]}),(0,e.jsx)(n.p,{children:\"PV\\uB97C \\uD30C\\uC77C \\uC2DC\\uC2A4\\uD15C\\uC73C\\uB85C attach \\uD558\\uC9C0 \\uC54A\\uACE0 Block Device\\uB85C attach \\uD558\\uB294 \\uBC29\\uBC95\\uB3C4 \\uC874\\uC7AC\\uD55C\\uB2E4. Block Storage\\uB97C \\uC9C1\\uC811 \\uCC98\\uB9AC\\uD574 \\uC131\\uB2A5\\uC774 \\uD5A5\\uC0C1\\uB420 \\uC218 \\uC788\\uB294 \\uBBF8\\uB4E4\\uC6E8\\uC5B4 \\uAC19\\uC740 \\uACBD\\uC6B0\\uB294 \\uC774 \\uBC29\\uBC95\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uAD8C\\uC7A5\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"PV\\uB97C Block Device\\uB85C \\uC0DD\\uC131\\uD558\\uB824\\uBA74 spec.volumeMode\\uB97C Block\\uC73C\\uB85C \\uC9C0\\uC815\\uD55C\\uB2E4. \\uAE30\\uBCF8\\uAC12\\uC740 Filesystem \\uC774\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`block\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`storageclass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Block\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3Gi\n`]})]})}),(0,e.jsx)(n.p,{children:\"Block Device\\uC758 PVC\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C\\uB294 Pod \\uC5D0\\uC11C \\uBCFC\\uB968\\uC744 \\uC9C0\\uC815\\uD560 \\uB54C spec.containers.volumeMounts \\uB300\\uC2E0 spec.containers.volumeDevices\\uB97C \\uC0AC\\uC6A9\\uD55C\\uB2E4. volumeMounts\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74, \\uB4F1\\uB85D\\uC774 \\uB418\\uC9C0\\uB9CC, \\uCEE8\\uD14C\\uC774\\uB108\\uB294 \\uB3D9\\uC791\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeDevices\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"devicePath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" /dev/sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`block\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaim\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"claimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`block\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"pvc-volume-expansion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#pvc-volume-expansion\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"PVC volume expansion\"]}),(0,e.jsx)(n.p,{children:\"\\uB3D9\\uC801 \\uD504\\uB85C\\uBE44\\uC800\\uB2DD\\uC744 \\uD560 \\uB54C \\uD06C\\uAE30\\uAC00 \\uC870\\uC808 \\uAE30\\uB2A5\\uC774 \\uC9C0\\uC6D0\\uB418\\uB294 \\uBCFC\\uB968 \\uD50C\\uB7EC\\uADF8\\uC778\\uC774 \\uC788\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"gcePersistenceDisk\"}),(0,e.jsx)(n.li,{children:\"awsElasticBlockStore\"}),(0,e.jsx)(n.li,{children:\"OpenStack Cinder\"}),(0,e.jsx)(n.li,{children:\"glusterfs\"}),(0,e.jsx)(n.li,{children:\"RDB(Rados Block Device)\"})]}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"StorageClass\\uC5D0\\uC11C allowVolumeExpansion\\uB97C true\\uB85C \\uC124\\uC815\\uD55C\\uB2E4.\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"storageclass\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`resize\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" pd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`ssd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kubernetes.io/gce\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Delete\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"allowVolumeExpansion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]})]})}),(0,e.jsx)(n.ol,{start:\"2\",children:(0,e.jsx)(n.li,{children:\"PVC\\uC5D0\\uC11C\\uB294 storageClassName\\uC744 \\uB9E4\\uD551\\uD55C\\uB2E4. \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC744 \\uB54C\\uC640 \\uBE44\\uAD50\\uD574 \\uD2B9\\uC815\\uD55C \\uC124\\uC815\\uC740 \\uC5C6\\uB2E4.\"})}),(0,e.jsx)(n.p,{children:\"StorageClass\\uC758 volumeBindingMode \\uBAA8\\uB4DC\\uB294 \\uC0DD\\uB7B5\\uD558\\uC5EC Immediate \\uC774\\uBBC0\\uB85C PV\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`resize\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 8G\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"storageclass\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`resize\n`]})]})}),(0,e.jsx)(n.ol,{children:(0,e.jsx)(n.li,{children:\"pvc\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 pod\\uB97C apply \\uD55C\\uB2E4.\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"resize\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.12\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'http'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/usr/share/nginx/html'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"persistentVolumeClaim\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"claimName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pvc\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`resize\n`]})]})}),(0,e.jsx)(n.p,{children:\"Pod\\uC5D0\\uC11C Bound \\uB41C PV\\uD655\\uC778 (PVC\\uB97C \\uC0DD\\uC131\\uD588\\uC744 \\uB54C\\uC640 \\uB3D9\\uC77C\\uD558\\uB2E4)\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" -it sample-pvc-resize-pod -- \",(0,e.jsx)(n.span,{className:\"token function\",children:\"df\"}),\" -h \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"grep\"}),` /usr/share/nginx/html\n`]})})}),(0,e.jsx)(n.p,{children:\"pvc\\uB97C patch \\uD558\\uC5EC capa\\uB97C \\uD655\\uC7A5\\uD55C\\uB2E4.(\\uCD95\\uC18C\\uB294 \\uBD88\\uAC00\\uB2A5\\uD558\\uB2E4.)\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl patch pvc sample-pvc-resize --path \",(0,e.jsx)(n.span,{className:\"token string\",children:`'{\"spec\": {\"resources\": {\"requests\":{\"storage: \"16Gi\"}}}}'`}),`\n`]})})}),(0,e.jsx)(n.p,{children:\"\\uB2E4\\uC2DC Pod\\uC5D0\\uC11C PV\\uD655\\uC778 \\uD558\\uBA74 \\uC99D\\uAC00\\uB418\\uC5B4 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" -it sample-pvc-resize-pod -- \",(0,e.jsx)(n.span,{className:\"token function\",children:\"df\"}),\" -h \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"grep\"}),` /usr/share/nginx/html\n`]})})})]})}}var P=v;return V;})();\n;return Component;","toc":[{"value":"PersistentVolumeClaim","url":"#persistentvolumeclaim","depth":2},{"value":"Pod에서 사용","url":"#pod에서-사용","depth":4},{"value":"동적 프로비저닝","url":"#동적-프로비저닝","depth":3},{"value":"PVC 할당 타이밍 제어","url":"#pvc-할당-타이밍-제어","depth":4},{"value":"PV를 Block Device로 사용","url":"#pv를-block-device로-사용","depth":4},{"value":"PVC volume expansion","url":"#pvc-volume-expansion","depth":4}],"frontMatter":{"readingTime":{"text":"7 min read","minutes":6.04,"time":362400,"words":1208},"slug":"k8s_manifest-PersistentVolumeClaim","fileName":"k8s_manifest-PersistentVolumeClaim.mdx","title":"K8S manifest - PersistentVolumeClaim","date":"2023-06-01T05:03:00.000Z","lastmod":"2023-06-01","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"demian11k","avatar":"/static/images/avatar.png","email":"demian11k@gmail.com","github":"https://github.com/demian9k","date":null}],"prev":{"title":"K8S manifest - PersistentVolume","date":"2023-06-01T04:03:00.000Z","lastmod":"2023-06-01","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-PersistentVolume"},"next":{"title":"K8S manifest - VolumeSnapshot","date":"2023-06-01T06:03:00.000Z","lastmod":"2023-06-01","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-VolumeSnapshot"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["k8s_manifest-PersistentVolumeClaim"]},"buildId":"otfPwKwSsy3CYkkcjSJd6","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>