<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>K8S manifest - Pod</title><meta name="robots" content="follow, index"/><meta name="description" content=""/><meta property="og:url" content="https://demian9k.github.io/blog/k8s_manifest-Pod"/><meta property="og:type" content="article"/><meta property="og:site_name" content="demian11k studylog"/><meta property="og:description" content=""/><meta property="og:title" content="K8S manifest - Pod"/><meta property="og:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="K8S manifest - Pod"/><meta name="twitter:description" content=""/><meta name="twitter:image" content="https://demian9k.github.io/static/images/twitter-card.png"/><link rel="canonical" href="https://demian9k.github.io/blog/k8s_manifest-Pod"/><meta property="article:published_time" content="2023-05-15T01:01:00.000Z"/><meta property="article:modified_time" content="2023-05-15T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://demian9k.github.io/blog/k8s_manifest-Pod"
  },
  "headline": "K8S manifest - Pod",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/twitter-card.png"
    }
  ],
  "datePublished": "2023-05-15T01:01:00.000Z",
  "dateModified": "2023-05-15T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "demian11k"
  },
  "publisher": {
    "@type": "Organization",
    "name": "demian11k",
    "logo": {
      "@type": "ImageObject",
      "url": "https://demian9k.github.io/static/images/logo.png"
    }
  },
  "description": ""
}</script><meta name="next-head-count" content="21"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/9da9539fac7f1ee9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9da9539fac7f1ee9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-1667cddafac2eea3.js" defer=""></script><script src="/_next/static/chunks/main-bfc1a3b6dd286443.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e097d8b875e64e46.js" defer=""></script><script src="/_next/static/chunks/140-77b8ab5a870d524b.js" defer=""></script><script src="/_next/static/chunks/574-40cb695d6b511631.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-48fd063b43fdbe6a.js" defer=""></script><script src="/_next/static/ZrykKxtWiPyMXxUDniMmQ/_buildManifest.js" defer=""></script><script src="/_next/static/ZrykKxtWiPyMXxUDniMmQ/_ssgManifest.js" defer=""></script><script src="/_next/static/ZrykKxtWiPyMXxUDniMmQ/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="demian11k.studylog" href="/static"><div class="flex items-center justify-between"><div class="mr-3"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="A" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full object-cover object-center md:h-36 lg:h-48" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="A" srcSet="/_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=48 1x, /_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=96 2x" src="/_next/static/media/demian_avatar_logo.c12b9855.png?imwidth=96" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="rounded-full object-cover object-center md:h-36 lg:h-48" loading="lazy"/></noscript></span></div><div class="hidden h-6 text-2xl font-semibold sm:block">demian11k.studylog</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div><header><div class="space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700"><dl><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-05-15T01:01:00.000Z">May 15, 2023</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">K8S manifest - Pod</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0 " style="grid-template-rows:auto 1fr"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p>일반적으로 Pod를 ReplicaSet, Deployment, StatefulSet과 같은 상위 객체가 사용하는 경우 별도의 Pod manifest 파일은 선언할 필요가 없다. Pod manifest가 사용되는 경우는 Pod가 독립적으로 사용되어야 할 때이다.(디버깅, 일회성 작업 등)</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token comment"># 기본 파드 선언</span>
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>pod
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.12</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 컨테이너 기본 포트가 80으로 공유하므로 실패하는 pod</span>
</span><span class="code-line"><span class="token comment"># 파드에 ip가 할당되고 container는 포트로 구분된다.</span>
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>2pod<span class="token punctuation">-</span>fail
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container<span class="token punctuation">-</span><span class="token number">112</span>
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.12</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container<span class="token punctuation">-</span><span class="token number">113</span>
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.13</span>
</span></code></pre></div><p>로그 보기</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">kubectl logs sample-2pod-fail -c nginx-container-113
</span><span class="code-line"><span class="token comment"># 2023/05/11 07:07:23 [emerg] 1#1: bind() to 0.0.0.0:80 failed (98: Address already in use)</span>
</span><span class="code-line"><span class="token comment"># nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</span>
</span></code></pre></div><p>포트 다르게 할당하여 해결하기</p><p>spec.containers.ports가 리스트인 이유는 Pod Manifest는 application이 몇개의 포트를 사용할 지 모르기 때문에 여러개로 설정할 수 있게 한 것이다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>2pod
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container<span class="token punctuation">-</span><span class="token number">112</span>
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.12</span>
</span><span class="code-line">      <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container<span class="token punctuation">-</span><span class="token number">113</span>
</span><span class="code-line">      <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.13</span>
</span><span class="code-line">      <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">containerPort</span><span class="token punctuation">:</span> <span class="token number">8081</span>
</span></code></pre></div><p>컨테이너 접근하기</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">kubectl <span class="token builtin class-name">exec</span> -it sample-pod -- /bin/bash
</span></code></pre></div><br/><p>컨테이너 실행될 때 명령어 실행하기</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>entrypoint
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container<span class="token punctuation">-</span><span class="token number">112</span>
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.12</span>
</span><span class="code-line"><span class="token atrule key">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;/bin/sleep&#x27;</span><span class="token punctuation">]</span> <span class="token comment"># ENTRYPOINT를 대체</span>
</span><span class="code-line"><span class="token atrule key">args</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;3600&#x27;</span><span class="token punctuation">]</span> <span class="token comment"># CMD를 대체</span>
</span></code></pre></div><h3 id="파드-dnspolicy-및-서비스-디스커버리"><a href="#파드-dnspolicy-및-서비스-디스커버리" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>파드 dnsPolicy 및 서비스 디스커버리</h3><p>이 파드들에 접속하여 /etc/resolv.conf를 확인하면 실제로 어떻게 DNS가 구성되었는지 확인할 수 있다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token comment"># ClusterFirst는 Pod의 default</span>
</span><span class="code-line"><span class="token comment"># 클러스터 내부 DNS에 질의하여 해석되지 않으면 upstream에 질의</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>dnspolicy<span class="token punctuation">-</span>clusterfirst
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">dnsPolicy</span><span class="token punctuation">:</span> ClusterFirst
</span><span class="code-line"><span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.16</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 파드 내부에서 static 하게 주소를 resolve 한다.</span>
</span><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>dnspolicy<span class="token punctuation">-</span>none
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">dnsPolicy</span><span class="token punctuation">:</span> None
</span><span class="code-line"><span class="token atrule key">dnsConfig</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">nameservers</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> 8.8.8.8
</span><span class="code-line"><span class="token punctuation">-</span> 8.8.4.4
</span><span class="code-line"><span class="token atrule key">searches</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> example.com
</span><span class="code-line"><span class="token atrule key">options</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> ndots
</span><span class="code-line"><span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&quot;5&quot;</span>
</span><span class="code-line"><span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.16</span>
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 파드가 있는 k8s 노드의 /etc/resolv.conf 를 상속받는다.</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>dnspolicy<span class="token punctuation">-</span>default
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">dnsPolicy</span><span class="token punctuation">:</span> Default
</span><span class="code-line"><span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.16</span>
</span></code></pre></div><h4 id="내부-dns-확인"><a href="#내부-dns-확인" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>내부 dns 확인</h4><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ kubectl get services -n kube-system
</span><span class="code-line">
</span><span class="code-line">NAME       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>                  AGE
</span><span class="code-line">kube-dns   ClusterIP   <span class="token number">10.96</span>.0.10   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">53</span>/UDP,53/TCP,9153/TCP   2d
</span></code></pre></div><p>기본적으로 Dockerfile의 WORKDIR 설정을 따르지만 아래처럼 override 하여 사용할 수 있다.</p><p>볼륨을 써서 특정 스크립트가 배치된 볼륨을 파드에 마운트할 스크립트에 배치된 디렉토리로 이동하여 실행하는 경우에 사용할 수 있다.</p><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pod
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> sample<span class="token punctuation">-</span>workingdir
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>container
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span><span class="token number">1.16</span>
</span><span class="code-line"><span class="token atrule key">workingDir</span><span class="token punctuation">:</span> /tmp
</span></code></pre></div><hr/><h4 id="chatgpt-qa"><a href="#chatgpt-qa" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>chatgpt Q&amp;A</h4><h2 id="in-this-manifest-how-to-service-discovery-works-to-select-deployment"><a href="#in-this-manifest-how-to-service-discovery-works-to-select-deployment" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>in this manifest, how to service discovery works to select deployment?</h2><div class="relative"><pre><code class="language-yaml code-highlight"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> apps/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Deployment
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> deploy1<span class="token punctuation">-</span>websrv
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
</span><span class="code-line">  <span class="token atrule key">selector</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">matchLabels</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">app</span><span class="token punctuation">:</span> websrv
</span><span class="code-line">  <span class="token atrule key">template</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">labels</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">app</span><span class="token punctuation">:</span> websrv
</span><span class="code-line">    <span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>web
</span><span class="code-line">          <span class="token atrule key">image</span><span class="token punctuation">:</span> nginx
</span><span class="code-line"><span class="token punctuation">---</span>
</span><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Service
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> svc1<span class="token punctuation">-</span>web
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> web<span class="token punctuation">-</span>port
</span><span class="code-line">      <span class="token atrule key">port</span><span class="token punctuation">:</span> <span class="token number">9001</span>
</span><span class="code-line">      <span class="token atrule key">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</span><span class="code-line">  <span class="token atrule key">selector</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">app</span><span class="token punctuation">:</span> websrv
</span><span class="code-line">  <span class="token atrule key">type</span><span class="token punctuation">:</span> ClusterIP
</span></code></pre></div><p>In the provided manifest, the Service resource <code>svc1-web</code> is used for service discovery to select the Deployment <code>deploy1-websrv</code>. Let&#x27;s break down how service discovery works in this scenario:</p><ol><li><p>Deployment Selector: The Deployment <code>deploy1-websrv</code> specifies a selector that labels the Pods it manages. In this case, the label <code>app: websrv</code> is applied to the Pods.</p></li><li><p>Service Selector: The Service <code>svc1-web</code> specifies a selector that matches the same label used by the Deployment&#x27;s Pods. The selector <code>app: websrv</code> in the Service resource allows it to discover and select the Pods associated with the Deployment.</p></li><li><p>TargetPort and Port: The Service <code>svc1-web</code> exposes a port named <code>web-port</code> (port number 9001) and maps it to the targetPort 80 of the Pods. This configuration specifies that traffic coming to the Service&#x27;s <code>web-port</code> should be forwarded to port 80 of the selected Pods.</p></li><li><p>ClusterIP Type: The Service <code>svc1-web</code> is of type ClusterIP, which means it receives an internal IP address within the cluster. This IP address is used to access the Service within the cluster, but it is not accessible externally.</p></li></ol><p>When a client wants to communicate with the Deployment&#x27;s Pods, it can use the ClusterIP of the Service <code>svc1-web</code> and the specified <code>web-port</code> (9001). The Service acts as a stable endpoint for the client to communicate with the selected Pods. The Service&#x27;s selector ensures that requests are load balanced to the Pods labeled with <code>app: websrv</code>.</p><p>The combination of matching selectors in the Deployment and Service allows for dynamic service discovery. As Pods are created or terminated as part of the Deployment&#x27;s scaling or updates, the Service will automatically adjust its selection of Pods to reflect the changes, ensuring continuous access to the desired backend Pods.</p><p>Note: In this configuration, the Service is of type ClusterIP, which means it is only accessible within the cluster. If you want to expose the Service externally, you would need to use a different service type, such as LoadBalancer or NodePort, depending on your infrastructure and requirements.</p><h2 id="i-wonder-why-deployement-spectemplatemetadatalabels-and-specselectormatchlabels-duplicated"><a href="#i-wonder-why-deployement-spectemplatemetadatalabels-and-specselectormatchlabels-duplicated" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>i wonder why Deployement spec.template.metadata.labels and spec.selector.matchLabels duplicated?</h2><p>The <code>spec.template.metadata.labels</code> and <code>spec.selector.matchLabels</code> fields in the Deployment manifest might seem duplicative, but they serve different purposes in the context of the Deployment resource. Let&#x27;s understand the significance of each field:</p><ol><li><p><code>spec.template.metadata.labels</code>: The <code>spec.template.metadata.labels</code> field is used to define labels for the Pods created by the Deployment. These labels are applied to the Pods&#x27; metadata and allow the Deployment to manage and select the Pods. In the given manifest, the label <code>app: websrv</code> is applied to the Pods created by the Deployment. These labels help identify and group the Pods associated with the Deployment.</p></li><li><p><code>spec.selector.matchLabels</code>: The <code>spec.selector.matchLabels</code> field specifies the labels used by the Deployment&#x27;s ReplicaSet to identify which Pods it should manage. The ReplicaSet uses this label selector to determine which Pods are part of its desired state. In this case, the selector <code>matchLabels: app: websrv</code> ensures that the ReplicaSet selects and manages Pods with the <code>app: websrv</code> label.</p></li></ol><p>While the labels specified in both fields have the same key-value pair (<code>app: websrv</code>), they serve different purposes within the Deployment:</p><ul><li><code>spec.template.metadata.labels</code> defines the labels for the Pods that the Deployment creates and manages.</li><li><code>spec.selector.matchLabels</code> specifies the labels that the Deployment&#x27;s ReplicaSet uses to identify and manage the desired Pods.</li></ul><p>By keeping these fields separate, the Deployment can maintain flexibility in managing the Pods. For example, you could update the <code>spec.template.metadata.labels</code> to add more labels without affecting the <code>spec.selector.matchLabels</code>, allowing you to change how the Pods are labeled without disrupting the ReplicaSet&#x27;s management of existing Pods.</p><p>Overall, this separation of labels allows for decoupling the labels used by the Deployment for creating Pods and the labels used by the ReplicaSet for identifying and managing those Pods.</p></div></div><div id="comment"></div><footer><div class="flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base"><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/Ingress-BareMetal_LoadBalancer_in_Windows-WSL-Kind-K8S">← <!-- -->Hands-On Example: Ingress and Bare Metal Load Balancer in Windows-WSL-Kind-K8S</a></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/k8s_manifest-Deployment">K8S manifest - Deployment<!-- --> →</a></div></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:demian11k@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/demian9k"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>demian11k</div><div> • </div><div>© 2023</div><div> • </div><a href="/static">demian11k studylog</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var l=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var t=a=\u003el(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=r(s,n))||c.enumerable});return a},y=a=\u003ek(t(l(a!=null?d(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((P,i)=\u003e{i.exports=_jsx_runtime});var v={};N(v,{default:()=\u003ef,frontmatter:()=\u003eg});var e=y(o()),g={title:\"K8S manifest - Pod\",date:new Date(168411246e4),lastmod:\"2023-05-15\",tags:[\"kubernetes\"],draft:!1,summary:\"\",layout:\"PostSimple\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",a:\"a\",h4:\"h4\",h2:\"h2\",ol:\"ol\",li:\"li\",ul:\"ul\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\uC77C\\uBC18\\uC801\\uC73C\\uB85C Pod\\uB97C ReplicaSet, Deployment, StatefulSet\\uACFC \\uAC19\\uC740 \\uC0C1\\uC704 \\uAC1D\\uCCB4\\uAC00 \\uC0AC\\uC6A9\\uD558\\uB294 \\uACBD\\uC6B0 \\uBCC4\\uB3C4\\uC758 Pod manifest \\uD30C\\uC77C\\uC740 \\uC120\\uC5B8\\uD560 \\uD544\\uC694\\uAC00 \\uC5C6\\uB2E4. Pod manifest\\uAC00 \\uC0AC\\uC6A9\\uB418\\uB294 \\uACBD\\uC6B0\\uB294 Pod\\uAC00 \\uB3C5\\uB9BD\\uC801\\uC73C\\uB85C \\uC0AC\\uC6A9\\uB418\\uC5B4\\uC57C \\uD560 \\uB54C\\uC774\\uB2E4.(\\uB514\\uBC84\\uAE45, \\uC77C\\uD68C\\uC131 \\uC791\\uC5C5 \\uB4F1)\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uAE30\\uBCF8 \\uD30C\\uB4DC \\uC120\\uC5B8\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.12\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uCEE8\\uD14C\\uC774\\uB108 \\uAE30\\uBCF8 \\uD3EC\\uD2B8\\uAC00 80\\uC73C\\uB85C \\uACF5\\uC720\\uD558\\uBBC0\\uB85C \\uC2E4\\uD328\\uD558\\uB294 pod\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD30C\\uB4DC\\uC5D0 ip\\uAC00 \\uD560\\uB2F9\\uB418\\uACE0 container\\uB294 \\uD3EC\\uD2B8\\uB85C \\uAD6C\\uBD84\\uB41C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"2pod\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`fail\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"112\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.12\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"113\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.13\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uB85C\\uADF8 \\uBCF4\\uAE30\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl logs sample-2pod-fail -c nginx-container-113\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# 2023/05/11 07:07:23 [emerg] 1#1: bind() to 0.0.0.0:80 failed (98: Address already in use)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uD3EC\\uD2B8 \\uB2E4\\uB974\\uAC8C \\uD560\\uB2F9\\uD558\\uC5EC \\uD574\\uACB0\\uD558\\uAE30\"}),(0,e.jsx)(n.p,{children:\"spec.containers.ports\\uAC00 \\uB9AC\\uC2A4\\uD2B8\\uC778 \\uC774\\uC720\\uB294 Pod Manifest\\uB294 application\\uC774 \\uBA87\\uAC1C\\uC758 \\uD3EC\\uD2B8\\uB97C \\uC0AC\\uC6A9\\uD560 \\uC9C0 \\uBAA8\\uB974\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC5EC\\uB7EC\\uAC1C\\uB85C \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uAC8C \\uD55C \\uAC83\\uC774\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`2pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"112\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.12\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"113\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.13\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8081\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uC811\\uADFC\\uD558\\uAE30\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),` -it sample-pod -- /bin/bash\n`]})})}),(0,e.jsx)(\"br\",{}),(0,e.jsx)(n.p,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uC2E4\\uD589\\uB420 \\uB54C \\uBA85\\uB839\\uC5B4 \\uC2E4\\uD589\\uD558\\uAE30\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`entrypoint\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"container\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"112\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.12\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'/bin/sleep'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ENTRYPOINT\\uB97C \\uB300\\uCCB4\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"args\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'3600'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# CMD\\uB97C \\uB300\\uCCB4\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uD30C\\uB4DC-dnspolicy-\\uBC0F-\\uC11C\\uBE44\\uC2A4-\\uB514\\uC2A4\\uCEE4\\uBC84\\uB9AC\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\uD30C\\uB4DC-dnspolicy-\\uBC0F-\\uC11C\\uBE44\\uC2A4-\\uB514\\uC2A4\\uCEE4\\uBC84\\uB9AC\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uD30C\\uB4DC dnsPolicy \\uBC0F \\uC11C\\uBE44\\uC2A4 \\uB514\\uC2A4\\uCEE4\\uBC84\\uB9AC\"]}),(0,e.jsx)(n.p,{children:\"\\uC774 \\uD30C\\uB4DC\\uB4E4\\uC5D0 \\uC811\\uC18D\\uD558\\uC5EC /etc/resolv.conf\\uB97C \\uD655\\uC778\\uD558\\uBA74 \\uC2E4\\uC81C\\uB85C \\uC5B4\\uB5BB\\uAC8C DNS\\uAC00 \\uAD6C\\uC131\\uB418\\uC5C8\\uB294\\uC9C0 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ClusterFirst\\uB294 Pod\\uC758 default\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD074\\uB7EC\\uC2A4\\uD130 \\uB0B4\\uBD80 DNS\\uC5D0 \\uC9C8\\uC758\\uD558\\uC5EC \\uD574\\uC11D\\uB418\\uC9C0 \\uC54A\\uC73C\\uBA74 upstream\\uC5D0 \\uC9C8\\uC758\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"dnspolicy\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clusterfirst\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dnsPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterFirst\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD30C\\uB4DC \\uB0B4\\uBD80\\uC5D0\\uC11C static \\uD558\\uAC8C \\uC8FC\\uC18C\\uB97C resolve \\uD55C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"dnspolicy\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`none\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dnsPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` None\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dnsConfig\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nameservers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` 8.8.8.8\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` 8.8.4.4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"searches\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` example.com\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"options\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ndots\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"5\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD30C\\uB4DC\\uAC00 \\uC788\\uB294 k8s \\uB178\\uB4DC\\uC758 /etc/resolv.conf \\uB97C \\uC0C1\\uC18D\\uBC1B\\uB294\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"dnspolicy\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dnsPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),`\n`]})]})}),(0,e.jsxs)(n.h4,{id:\"\\uB0B4\\uBD80-dns-\\uD655\\uC778\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#\\uB0B4\\uBD80-dns-\\uD655\\uC778\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uB0B4\\uBD80 dns \\uD655\\uC778\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ kubectl get services -n kube-system\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"NAME       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"S\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`                  AGE\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kube-dns   ClusterIP   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.96\"}),\".0.10   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"none\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\"        \",(0,e.jsx)(n.span,{className:\"token number\",children:\"53\"}),`/UDP,53/TCP,9153/TCP   2d\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C Dockerfile\\uC758 WORKDIR \\uC124\\uC815\\uC744 \\uB530\\uB974\\uC9C0\\uB9CC \\uC544\\uB798\\uCC98\\uB7FC override \\uD558\\uC5EC \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uBCFC\\uB968\\uC744 \\uC368\\uC11C \\uD2B9\\uC815 \\uC2A4\\uD06C\\uB9BD\\uD2B8\\uAC00 \\uBC30\\uCE58\\uB41C \\uBCFC\\uB968\\uC744 \\uD30C\\uB4DC\\uC5D0 \\uB9C8\\uC6B4\\uD2B8\\uD560 \\uC2A4\\uD06C\\uB9BD\\uD2B8\\uC5D0 \\uBC30\\uCE58\\uB41C \\uB514\\uB809\\uD1A0\\uB9AC\\uB85C \\uC774\\uB3D9\\uD558\\uC5EC \\uC2E4\\uD589\\uD558\\uB294 \\uACBD\\uC6B0\\uC5D0 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sample\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`workingdir\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" nginx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1.16\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workingDir\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /tmp\n`]})]})}),(0,e.jsx)(\"hr\",{}),(0,e.jsxs)(n.h4,{id:\"chatgpt-qa\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#chatgpt-qa\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"chatgpt Q\u0026A\"]}),(0,e.jsxs)(n.h2,{id:\"in-this-manifest-how-to-service-discovery-works-to-select-deployment\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#in-this-manifest-how-to-service-discovery-works-to-select-deployment\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"in this manifest, how to service discovery works to select deployment?\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` apps/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Deployment\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" deploy1\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`websrv\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"replicas\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"selector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"matchLabels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` websrv\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"template\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` websrv\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" pod\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`web\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"---\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Service\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" svc1\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`web\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" web\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`port\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"9001\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"targetPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"selector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` websrv\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ClusterIP\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"In the provided manifest, the Service resource \",(0,e.jsx)(n.code,{children:\"svc1-web\"}),\" is used for service discovery to select the Deployment \",(0,e.jsx)(n.code,{children:\"deploy1-websrv\"}),\". Let's break down how service discovery works in this scenario:\"]}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"Deployment Selector: The Deployment \",(0,e.jsx)(n.code,{children:\"deploy1-websrv\"}),\" specifies a selector that labels the Pods it manages. In this case, the label \",(0,e.jsx)(n.code,{children:\"app: websrv\"}),\" is applied to the Pods.\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"Service Selector: The Service \",(0,e.jsx)(n.code,{children:\"svc1-web\"}),\" specifies a selector that matches the same label used by the Deployment's Pods. The selector \",(0,e.jsx)(n.code,{children:\"app: websrv\"}),\" in the Service resource allows it to discover and select the Pods associated with the Deployment.\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"TargetPort and Port: The Service \",(0,e.jsx)(n.code,{children:\"svc1-web\"}),\" exposes a port named \",(0,e.jsx)(n.code,{children:\"web-port\"}),\" (port number 9001) and maps it to the targetPort 80 of the Pods. This configuration specifies that traffic coming to the Service's \",(0,e.jsx)(n.code,{children:\"web-port\"}),\" should be forwarded to port 80 of the selected Pods.\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"ClusterIP Type: The Service \",(0,e.jsx)(n.code,{children:\"svc1-web\"}),\" is of type ClusterIP, which means it receives an internal IP address within the cluster. This IP address is used to access the Service within the cluster, but it is not accessible externally.\"]})})]}),(0,e.jsxs)(n.p,{children:[\"When a client wants to communicate with the Deployment's Pods, it can use the ClusterIP of the Service \",(0,e.jsx)(n.code,{children:\"svc1-web\"}),\" and the specified \",(0,e.jsx)(n.code,{children:\"web-port\"}),\" (9001). The Service acts as a stable endpoint for the client to communicate with the selected Pods. The Service's selector ensures that requests are load balanced to the Pods labeled with \",(0,e.jsx)(n.code,{children:\"app: websrv\"}),\".\"]}),(0,e.jsx)(n.p,{children:\"The combination of matching selectors in the Deployment and Service allows for dynamic service discovery. As Pods are created or terminated as part of the Deployment's scaling or updates, the Service will automatically adjust its selection of Pods to reflect the changes, ensuring continuous access to the desired backend Pods.\"}),(0,e.jsx)(n.p,{children:\"Note: In this configuration, the Service is of type ClusterIP, which means it is only accessible within the cluster. If you want to expose the Service externally, you would need to use a different service type, such as LoadBalancer or NodePort, depending on your infrastructure and requirements.\"}),(0,e.jsxs)(n.h2,{id:\"i-wonder-why-deployement-spectemplatemetadatalabels-and-specselectormatchlabels-duplicated\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",href:\"#i-wonder-why-deployement-spectemplatemetadatalabels-and-specselectormatchlabels-duplicated\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"i wonder why Deployement spec.template.metadata.labels and spec.selector.matchLabels duplicated?\"]}),(0,e.jsxs)(n.p,{children:[\"The \",(0,e.jsx)(n.code,{children:\"spec.template.metadata.labels\"}),\" and \",(0,e.jsx)(n.code,{children:\"spec.selector.matchLabels\"}),\" fields in the Deployment manifest might seem duplicative, but they serve different purposes in the context of the Deployment resource. Let's understand the significance of each field:\"]}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"spec.template.metadata.labels\"}),\": The \",(0,e.jsx)(n.code,{children:\"spec.template.metadata.labels\"}),\" field is used to define labels for the Pods created by the Deployment. These labels are applied to the Pods' metadata and allow the Deployment to manage and select the Pods. In the given manifest, the label \",(0,e.jsx)(n.code,{children:\"app: websrv\"}),\" is applied to the Pods created by the Deployment. These labels help identify and group the Pods associated with the Deployment.\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"spec.selector.matchLabels\"}),\": The \",(0,e.jsx)(n.code,{children:\"spec.selector.matchLabels\"}),\" field specifies the labels used by the Deployment's ReplicaSet to identify which Pods it should manage. The ReplicaSet uses this label selector to determine which Pods are part of its desired state. In this case, the selector \",(0,e.jsx)(n.code,{children:\"matchLabels: app: websrv\"}),\" ensures that the ReplicaSet selects and manages Pods with the \",(0,e.jsx)(n.code,{children:\"app: websrv\"}),\" label.\"]})})]}),(0,e.jsxs)(n.p,{children:[\"While the labels specified in both fields have the same key-value pair (\",(0,e.jsx)(n.code,{children:\"app: websrv\"}),\"), they serve different purposes within the Deployment:\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"spec.template.metadata.labels\"}),\" defines the labels for the Pods that the Deployment creates and manages.\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"spec.selector.matchLabels\"}),\" specifies the labels that the Deployment's ReplicaSet uses to identify and manage the desired Pods.\"]})]}),(0,e.jsxs)(n.p,{children:[\"By keeping these fields separate, the Deployment can maintain flexibility in managing the Pods. For example, you could update the \",(0,e.jsx)(n.code,{children:\"spec.template.metadata.labels\"}),\" to add more labels without affecting the \",(0,e.jsx)(n.code,{children:\"spec.selector.matchLabels\"}),\", allowing you to change how the Pods are labeled without disrupting the ReplicaSet's management of existing Pods.\"]}),(0,e.jsx)(n.p,{children:\"Overall, this separation of labels allows for decoupling the labels used by the Deployment for creating Pods and the labels used by the ReplicaSet for identifying and managing those Pods.\"})]})}}var f=b;return v;})();\n;return Component;","toc":[{"value":"파드 dnsPolicy 및 서비스 디스커버리","url":"#파드-dnspolicy-및-서비스-디스커버리","depth":3},{"value":"내부 dns 확인","url":"#내부-dns-확인","depth":4},{"value":"chatgpt Q\u0026A","url":"#chatgpt-qa","depth":4},{"value":"in this manifest, how to service discovery works to select deployment?","url":"#in-this-manifest-how-to-service-discovery-works-to-select-deployment","depth":2},{"value":"i wonder why Deployement spec.template.metadata.labels and spec.selector.matchLabels duplicated?","url":"#i-wonder-why-deployement-spectemplatemetadatalabels-and-specselectormatchlabels-duplicated","depth":2}],"frontMatter":{"readingTime":{"text":"8 min read","minutes":7.825,"time":469500,"words":1565},"slug":"k8s_manifest-Pod","fileName":"k8s_manifest-Pod.mdx","title":"K8S manifest - Pod","date":"2023-05-15T01:01:00.000Z","lastmod":"2023-05-15","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"demian11k","avatar":"/static/images/avatar.png","email":"demian11k@gmail.com","github":"https://github.com/demian9k","date":null}],"prev":{"title":"Hands-On Example: Ingress and Bare Metal Load Balancer in Windows-WSL-Kind-K8S","date":"2023-05-12T03:03:00.000Z","lastmod":"2023-05-12","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"Ingress-BareMetal_LoadBalancer_in_Windows-WSL-Kind-K8S"},"next":{"title":"K8S manifest - Deployment","date":"2023-05-15T03:03:00.000Z","lastmod":"2023-05-15","tags":["kubernetes"],"draft":false,"summary":"","layout":"PostSimple","slug":"k8s_manifest-Deployment"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["k8s_manifest-Pod"]},"buildId":"ZrykKxtWiPyMXxUDniMmQ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>